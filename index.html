<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo_180.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/mylogo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/mylogo.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/images/manifest.json">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"yoursite.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.13.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Jettison">
<meta property="og:type" content="website">
<meta property="og:title" content="Jettisons&#39; Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Jettisons&#39; Blog">
<meta property="og:description" content="Jettison">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jettison">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://yoursite.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Jettisons' Blog</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Jettisons' Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Hello,world</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">1</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">12</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jettison"
      src="/images/mylogo.png">
  <p class="site-author-name" itemprop="name">Jettison</p>
  <div class="site-description" itemprop="description">Jettison</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Jettisons" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Jettisons" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jettisons@163.com" title="E-Mail → mailto:jettisons@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/%E8%AE%B0%E5%BD%95%E5%9C%A8vue%E9%A1%B9%E7%9B%AE%E9%87%8C%E5%AE%9E%E7%8E%B0%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2%E7%9A%84%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/%E8%AE%B0%E5%BD%95%E5%9C%A8vue%E9%A1%B9%E7%9B%AE%E9%87%8C%E5%AE%9E%E7%8E%B0%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2%E7%9A%84%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">在vue项目里实现百度地图坐标转换</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-08-29 10:54:21" itemprop="dateModified" datetime="2020-08-29T10:54:21+08:00">2020-08-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>4.3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="在vue项目里实现百度地图坐标转换"><a href="#在vue项目里实现百度地图坐标转换" class="headerlink" title="在vue项目里实现百度地图坐标转换"></a>在vue项目里实现百度地图坐标转换</h1><blockquote>
<p>背景</p>
</blockquote>
<p>​		背景是这样的，因项目需要，在网页中要放置一张百度地图，用来显示各种不同局站的地理分布，大概有几百个坐标需要同时显示。而甲方给的数据表中的坐标是大地坐标系（WGS84），而百度地图使用的则是自己的百度坐标系（bd09），因此直接显示会有偏移而不准确，所以要进行纠偏后才能正常显示。</p>
<blockquote>
<p>百度提供的接口</p>
</blockquote>
<p>百度坐标转换接口的服务文档：<br><a target="_blank" rel="noopener" href="https://lbsyun.baidu.com/index.php?title=webapi/guide/changeposition">https://lbsyun.baidu.com/index.php?title=webapi/guide/changeposition</a></p>
<p>接口：<br><a target="_blank" rel="noopener" href="http://api.map.baidu.com/geoconv/v1/?coords=114.21892734521,29.575429778924&amp;from=1&amp;to=5&amp;ak=%E4%BD%A0%E7%9A%84%E5%AF%86%E9%92%A5">http://api.map.baidu.com/geoconv/v1/?coords=114.21892734521,29.575429778924&amp;from=1&amp;to=5&amp;ak=你的密钥</a> &#x2F;&#x2F;GET请求</p>
<p>按照服务文档的说明，可以通过这个接口提交坐标转换的申请，即发送需要转换的坐标、源坐标类型、目标坐标类型，从而得到一个状态码和坐标转换后的结果，其格式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;status&quot;</span>:<span class="number">0</span>,<span class="string">&quot;result&quot;</span>:[&#123;<span class="string">&quot;x&quot;</span>:<span class="number">117.19322369775665</span>,<span class="string">&quot;y&quot;</span>:<span class="number">39.12574664331678</span>&#125;]&#125;</span><br></pre></td></tr></table></figure>

<p>从这个返回值中可以取回坐标值应用到我们的地图组件中。</p>
<blockquote>
<p>原始数据</p>
</blockquote>
<p>在项目里我们通过<code>axios</code>从后台获取到数据表并放入<strong>pointData</strong>数组中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;...&quot;</span>,</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">success</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pointData</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p><strong>pointData</strong>包含了多个数组对象，每个数组对应不同类型的局站，每个数组下又包含100个左右具体局站的数据信息。</p>
<p>例如某一个局站的经度可以这样调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pointData[<span class="number">0</span>][<span class="number">0</span>].<span class="property">lat</span> <span class="comment">//该局站的维度</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>面临问题</p>
</blockquote>
<p><strong>问题（一）：</strong>跨域</p>
<p>​		在本地如果直接用<code>axios</code>调用百度接口会因为浏览器的跨域资源共享（CORS）机制而导致无法获取数据</p>
<p><strong>问题（二）：</strong>发送坐标</p>
<p>​		百度地图接口单次最多可以接收100个坐标，因此需要将原始数据里的坐标提出来并拼接成为一个字符串</p>
<p><strong>问题（三）：</strong>异步执行问题</p>
<p>​		每一次向接口发送请求都是一个异步操作，而我们数据的组装是有顺序的，需要进行同步操作才能够实现我们的功能</p>
<blockquote>
<p>解决方案</p>
</blockquote>
<p><strong>一：</strong>使用JSONP解决跨域问题</p>
<p>​		Jsonp（JSON with Padding）是 json 的一种”使用模式”，可以让网页从别的域名（网站）那获取资料，即跨域读取数据。</p>
<hr>
<ol>
<li><p>首先安装jsonp依赖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-jsonp --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>接着在main.js上导入并安装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">VueJsonp</span> <span class="keyword">from</span> <span class="string">&#x27;vue-jsonp&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueJsonp</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>接下来就可以通过调用<code>this.$jsonp(url)</code>来进行跨域访问链接了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$jsonp(url).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!res.<span class="property">status</span>) &#123;</span><br><span class="line">    	<span class="comment">//...处理语句</span></span><br><span class="line">        &#125;&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>二：</strong>进行字符串拼接（坐标转换方法）</p>
<p>​		可以将数据中的坐标提取出来每100个拼接成为一个字符串并进行一次转换申请，如果对每一个坐标单独转换的话，会产生相当高的并发，容易超过百度接口的额度，并且会造成服务器的延迟，增加复杂度。</p>
<hr>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">converted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//s为拼接后的字符串</span></span><br><span class="line">    <span class="keyword">var</span> s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//points为装载所有转换后的点的坐标列表</span></span><br><span class="line">    <span class="keyword">var</span> points = [];</span><br><span class="line">    <span class="comment">//temp为临时存放坐标的集合</span></span><br><span class="line">    <span class="keyword">var</span> temp = [];</span><br><span class="line">	<span class="comment">//字符串拼接并发送请求</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>;j&lt;<span class="variable language_">this</span>.<span class="property">pointData</span>.<span class="property">length</span>;j++)&#123;</span><br><span class="line">        <span class="comment">// console.log(`循环第$&#123;j&#125;次`)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> <span class="variable language_">this</span>.<span class="property">pointData</span>[j])&#123;</span><br><span class="line">            s += item.<span class="property">lng</span> + <span class="string">&quot;,&quot;</span> + item.<span class="property">lat</span> + <span class="string">&quot;;&quot;</span></span><br><span class="line">            i++;</span><br><span class="line">            <span class="comment">//到100个时开始发送请求并将返回值保存</span></span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">100</span>)&#123;</span><br><span class="line">                <span class="comment">//发送一次请求并等待返回</span></span><br><span class="line">                <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">send</span>(s);</span><br><span class="line">                <span class="comment">//将这次返回结果装入temp数组</span></span><br><span class="line">                temp = temp.<span class="title function_">concat</span>(res.<span class="property">result</span>);</span><br><span class="line">                <span class="comment">//清空坐标进行下一轮请求</span></span><br><span class="line">                s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                i = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将剩下的坐标发送请求</span></span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">send</span>(s);</span><br><span class="line">        <span class="comment">//返回的坐标全部保存在temp数组中</span></span><br><span class="line">        temp = temp.<span class="title function_">concat</span>(res.<span class="property">result</span>);</span><br><span class="line">        <span class="comment">//将这一组坐标装入points数组中</span></span><br><span class="line">        points.<span class="title function_">push</span>(temp);</span><br><span class="line">        temp = [];</span><br><span class="line">        s = <span class="string">&quot;&quot;</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//对原始坐标进行转换</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="variable language_">this</span>.<span class="property">pointData</span>.<span class="property">length</span>; j++)&#123;</span><br><span class="line">        <span class="comment">//console.log(`第$&#123;j&#125;组转换`)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> [index,item] <span class="keyword">of</span> <span class="variable language_">this</span>.<span class="property">pointData</span>[j].<span class="title function_">entries</span>()) &#123;</span><br><span class="line">            item.<span class="property">lng</span> = points[j][index].<span class="property">x</span>;</span><br><span class="line">            item.<span class="property">lat</span> = points[j][index].<span class="property">y</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>三：</strong>使用<strong>async</strong>、<strong>await</strong>关键字和<strong>promise</strong>对象解决异步问题</p>
<blockquote>
<blockquote>
<p>Event Loop</p>
</blockquote>
</blockquote>
<p>​		JavaScript语言一种单线程语言，所有任务都在一个线程上完成，单线程的运行方式为<strong>“同步模式”（synchronous I&#x2F;O）</strong>或<strong>“堵塞模式”（blocking I&#x2F;O）</strong></p>
<p>​		于是就采用<strong>Event Loop</strong>机制，来解决单线程运行带来的一些问题。就是在程序中设置两个线程：一个负责程序本身的运行，称为**”主线程”<strong>；另一个负责主线程与其他进程（主要是各种I&#x2F;O操作）的通信，被称为</strong>“Event Loop线程”（可以译为”消息线程”）**。</p>
<p>​		每当遇到I&#x2F;O的时候，就<strong>Event Loop</strong>线程去做，而主线程继续往后运行。当I&#x2F;O操作完成，<strong>Event Loop</strong>线程再把结果返回，完成调用其回调函数完成任务。</p>
<p>​		于是，主线程可以在相同时间运行更多的任务，这种运行方式称为<strong>“异步模式”（asynchronous I&#x2F;O）</strong>或<strong>“非堵塞模式”（non-blocking mode）</strong>。</p>
<hr>
<p>​		正是由于<strong>Event Loop</strong>机制的存在，程序中的I&#x2F;O操作都是异步模式。在前面的坐标转换方法中，我们的<code>pointData</code>数组中装了很多组坐标，每一组都是某一种类型局站的坐标，因此整个转换请求方法需要两个for循环才能全部转换完成。</p>
<p>​		当我们仅实现一组的坐标转换时，<strong>Event Loop</strong>机制并不会对结果产生影响，而进行下一组转换前，<code>temp</code>的值要<code>push</code>到<code>points</code>中之后并被清空，此时问题就来了。</p>
<p>​		我们知道，<strong>Event Loop</strong>线程会和主线程分离，<strong>也就是说for循环并不管我们发送的I&#x2F;O请求是否返回了结果，就继续往下执行</strong>。有可能temp还是空的时候，我们的主线程的一轮循环就结束了，结果这一组坐标就没有被装进去，可能被装进下一组中甚至丢失，总之无法实现我们想要的结果。</p>
<p>​		也就是说，我们希望这个程序是<strong>完全同步</strong>的，每一个语句完全执行完毕再进行下一个语句，但是<strong>Event Loop</strong>导致他是异步的，所以便出现了错误。</p>
<p>要想解决这个问题，我们就需要使用<strong>async</strong>、<strong>await</strong>关键字和<strong>promise</strong>对象了。</p>
<hr>
<ol>
<li><p><strong>async、await</strong>关键字</p>
<p><strong>async</strong>用于声明一个函数是异步的。而<strong>await</strong>从字面意思上是“等待”的意思，是<code>async await</code>的简写，用于等待异步完成。并且<strong>await</strong>只能在<strong>async</strong>函数内使用，<strong>简单理解就是，async 声明的函数内的异步会按照同步执行顺序</strong>。通常<strong>async</strong>、<strong>await</strong>都是跟随<strong>Promise</strong>一起使用的。</p>
<p>在希望其内运行顺序为同步的函数名前加上<code>async</code>关键字，在其中的异步I&#x2F;O操作前加上<code>await</code>关键字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">send</span>(s);</span><br></pre></td></tr></table></figure>

<p>我们的<code>s</code>是一个坐标字符串，即待转换的一组坐标，<code>send()</code>函数是一个I&#x2F;O请求，<code>res</code>为返回的转换后的坐标，加上<code>await</code>关键字之后，程序运行到这一句将等待<code>send()</code>函数返回，即res中得到返回值后再向下运行</p>
</li>
<li><p><strong>promise</strong>对象</p>
<p><strong>promise</strong>,简单来说就是一个容器，里面保存着某个未来才会结束的时间(通常是一个异步操作的结果)</p>
<p><strong>promise</strong>有三个状态：<strong>pending</strong>（执行中）、<strong>success</strong>（成功）、<strong>rejected</strong>（失败），当执行成功会返回<code>resolve()</code>中的值，失败则会返回<code>reject()</code>中的值</p>
<p><strong>await</strong>后面要跟一个<strong>promise</strong>对象才能进行阻塞，若不是<strong>promise</strong>对象，则还是会直接执行下面的语句。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">send</span>(<span class="params">s</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        s = s.<span class="title function_">substring</span>(<span class="number">0</span>,s.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">        s = <span class="string">&quot;http://api.map.baidu.com/geoconv/v1/?coords=&quot;</span> + s + <span class="string">&quot;&amp;from=3&amp;to=5&amp;ak=DZSjokGwq1OaHmR4iEhN4O0TXb0ImGBS&quot;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.$jsonp(</span><br><span class="line">          s</span><br><span class="line">        ).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (!res.<span class="property">status</span>) &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(res)</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">          <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">记录一次配置项目到ubuntu服务器上的操作</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-07-14 19:31:48" itemprop="dateModified" datetime="2021-07-14T19:31:48+08:00">2021-07-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>3.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="记录一次配置项目到服务器上的操作"><a href="#记录一次配置项目到服务器上的操作" class="headerlink" title="记录一次配置项目到服务器上的操作"></a>记录一次配置项目到服务器上的操作</h2><h2 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h2><h3 id="连接远程服务器"><a href="#连接远程服务器" class="headerlink" title="连接远程服务器"></a>连接远程服务器</h3><p>打开命令符，输入<code>ssh 用户名@服务器ip地址</code>，之后输入密码即可进入</p>
<h3 id="前端vue项目打包"><a href="#前端vue项目打包" class="headerlink" title="前端vue项目打包"></a>前端vue项目打包</h3><ol>
<li><p><code>npm run build</code>：编译代码到.&#x2F;dist文件夹下</p>
</li>
<li><p>使用scp命令将dist文件夹传到服务器的前端文件夹下</p>
<p><code>scp -r dist ubuntu@服务器ip地址:/home/ubuntu/font</code></p>
</li>
</ol>
<h3 id="后端Java项目打包"><a href="#后端Java项目打包" class="headerlink" title="后端Java项目打包"></a>后端Java项目打包</h3><ol>
<li>点击maven，点击Lifcycle下的package，将项目打包为一个jar包</li>
<li>使用scp命令将jar包传到服务器的后端文件夹下（scp命令不需要加 -r参数了，因为-r是传文件夹）</li>
</ol>
<h3 id="配置服务器"><a href="#配置服务器" class="headerlink" title="配置服务器"></a>配置服务器</h3><h4 id="安装jdk"><a href="#安装jdk" class="headerlink" title="安装jdk"></a>安装jdk</h4><ol>
<li>在本机下载jdk-8u271-linux-x64.tar.gz</li>
<li>将jdk传到服务器上，使用命令<code>scp ./文件名 用户名@地址:/存放路径  </code> </li>
<li>进入服务器cd到存放jdk的路径中，安装jdk：<code>tar -zxvf ./jdk-8u271-linux-x64.tar.gz</code></li>
<li>安装后得到一个文件夹jdk1.8.0_271，可以使用命令移动到java1.8文件夹下：<code>mv ./jdk1.8.0_271 java1.8</code></li>
<li><code>sudo vim /etc/profile</code>：使用vim编辑环境变量，将jdk配置到环境变量中</li>
<li>在vim中，按<code>i</code>键进入编辑模式，编辑完成后，按<code>esc</code>退出编辑模式，按住<code>shift</code>再按两次<code>z</code>退出vim编辑器</li>
<li>输入<code>source /etc/profile</code>执行该文件一下使配置生效</li>
<li>输入java、javac查看java环境是否安装成功</li>
</ol>
<h4 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h4><ol>
<li><code>sudo apt-get install nginx</code>：安装nginx</li>
<li>在&#x2F;etc&#x2F;nginx&#x2F;conf.d文件夹下创建自定义配置文件nginx.conf</li>
<li>编辑该配置文件</li>
<li></li>
</ol>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">listen 8001;</span><br><span class="line">server<span class="emphasis">_name localhost;</span></span><br><span class="line"><span class="emphasis">#charset koi8-r;</span></span><br><span class="line"><span class="emphasis">#access_</span>log /var/log/nginx/host.access.1og main;</span><br><span class="line">location / &#123;</span><br><span class="line"><span class="section">#root /usr/share/nginx/html;</span></span><br><span class="line">root /home/ubuntu/font/dist;</span><br><span class="line">index index.html index.htm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="前端配置"><a href="#前端配置" class="headerlink" title="前端配置"></a>前端配置</h4><p>前端项目在&#x2F;home&#x2F;ubuntu&#x2F;font&#x2F;dist里，通过nginx引用即可</p>
<h4 id="配置后端"><a href="#配置后端" class="headerlink" title="配置后端"></a>配置后端</h4><ol>
<li><code>mkdir back</code>：创建名为back的前端文件夹</li>
<li>本机将jar包上传到back中</li>
<li>在服务器中<code>cd back</code>切换到back目录下，<code>ls</code>查看当前目录文件</li>
<li><code>touch start.sh</code>：创建启动脚本</li>
<li>编辑启动脚本内容输入<br><code>nohup java -jar jieruwangjavasu-0.0.1-SNAPSHOT.jar &amp;</code></li>
<li><code>sh start.sh</code>：启动脚本，会输出一个<code>nohup.out</code>文件</li>
<li><code>cat nohup.out</code>：查看该文件内容了解后台是否启动</li>
<li><code>ps -ef |grep jieruwangjavasu-0.0.1-SNAPSHOT.jar</code>：查看该jar包的启动进程</li>
<li><code>kill+pid</code>：可以杀死某pid的进程</li>
<li><code>rm -rf+文件名</code>：可以删除某文件</li>
</ol>
<h4 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h4><p><code>systemctl start nginx</code>：启动nginx</p>
<p><code>systemctl status nginx</code>：查看nginx启动状态</p>
<p><code>sudo lsof -i:8001</code>：查看端口占用</p>
<p><code>sudo systemctl restart nginx</code>：重启nginx</p>
<h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><h4 id="mysql-5-7"><a href="#mysql-5-7" class="headerlink" title="mysql 5.7"></a>mysql 5.7</h4><ol>
<li><code>sudo apt-get install mysql-server-5.7</code>：安装MYSQL5.7</li>
<li><code>sudo apt install libmysqlclient-dev</code>：安装依赖</li>
<li><code>sudo netstat -tap | grep mysql</code>：检查状态</li>
<li><code>sudo su</code>：进入root用户</li>
<li><code>mysql -u root -p</code>：进入mysql，初始密码为空</li>
<li><code>show databases</code>：查看数据库</li>
<li><code>use mysql</code>：进入mysql数据库</li>
<li><code>select host, user from user</code>：查看用户及其地址</li>
<li><code>update user set host=&#39;%&#39; where user = &#39;root&#39;</code>：设置root的host为%，即任何地址可连接</li>
<li><code>GRANT ALL PRIVILEGES ON \*.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;xxx&#39;;</code>：授权root用户远程登录，%表示不限IP</li>
<li><code>flush privileges;</code>：刷新权限</li>
<li><code>exit</code>：退出mysql</li>
<li><code>sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</code>：更改配置文件中的bind-address为0.0.0.0</li>
<li><code>systemctl start mysql</code>：启动mysql服务</li>
</ol>
<h4 id="mysql8-0"><a href="#mysql8-0" class="headerlink" title="mysql8.0"></a>mysql8.0</h4><p>其他步骤同5.7，授予权限不太相同</p>
<p><code>GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; WITH GRANT OPTION;</code>：授予root用户所有权限</p>
<h4 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h4><p><code>show tables;</code>：查看所有的表</p>
<p><code>describe 表名;</code>：查看该表结构</p>
<p><code>DROP TABLE table_name ;</code>：删除某张表</p>
<p><code>UPDATE &lt;表名&gt; SET 字段 1=值 1 [,字段 2=值 2… ] [WHERE 子句 ]</code>：修改某值</p>
<h1 id="react项目服务器配置"><a href="#react项目服务器配置" class="headerlink" title="react项目服务器配置"></a>react项目服务器配置</h1><ol>
<li><p>应用本地打包</p>
<p><code>mvn clean package</code></p>
</li>
<li><p>本地包上传到服务器（U盘拷贝）</p>
<p>1.若在&#x2F;usr文件夹下，需要超级权限才可以拷贝</p>
<p>2.启动超级权限<code>sudo nautilus</code></p>
</li>
<li><p>服务器启动jar包</p>
<p>1.先删除之前进程</p>
<p>2.创建deploy.sh，把里面jar包名字替换为新上传的jar包</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20201123225457860.png" alt="image-20201123225457860"></p>
<p>3.运行脚本文件：sh deploy.sh</p>
</li>
<li><p>查看工程运行日志</p>
<ul>
<li><code>tail -40f nohup.out</code></li>
</ul>
</li>
</ol>
<h3 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h3><p><code>sz 文件名 </code>：下载文件到本机</p>
<p><code>rz</code>：上传文件到服务器</p>
<p><code>zip -r filename.zip dirname</code>：打包文件夹</p>
<h3 id="jar包命令"><a href="#jar包命令" class="headerlink" title="jar包命令"></a>jar包命令</h3><p>1.jar包启动命令</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar xxx.jar</span><br></pre></td></tr></table></figure>

<p>2..修改项目启动端口号</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar xxx.jar --server.port=<span class="number">8080</span> 注释：将<span class="number">8080</span>替换成自己想要的端口 	</span><br></pre></td></tr></table></figure>

<p>3.修改数据库连接配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -jar xxx.jar --spring.datasource.url=“jdbc:mysql:<span class="comment">//localhost:3306/xxx?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=true&amp;serverTimezone=UTC” --spring.datasource.username=root --spring.datasource.password=123456</span></span><br><span class="line">注释：将root 以及<span class="number">123456</span>替换成自己想要的数据库用户名以及密码即可</span><br></pre></td></tr></table></figure>

<h2 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h2><h3 id="接入网项目"><a href="#接入网项目" class="headerlink" title="接入网项目"></a>接入网项目</h3><blockquote>
<p>nginx</p>
</blockquote>
<ol>
<li><p>去官网下载nginx并解压</p>
</li>
<li><p>在conf文件夹下的nginx.conf中修改配置文件</p>
</li>
<li><p>双击nginx.exe启动</p>
</li>
<li><p><code>tasklist /fi &quot;imagename eq nginx.exe&quot;</code>查看是否启动成功</p>
</li>
<li><p>关闭nginx：输入nginx命令  <code>nginx -s stop</code>(快速停止nginx)  或  <code>nginx -s quit</code>(完整有序的停止nginx)</p>
<p>或使用<code> taskkill /f /t /im nginx.exe</code></p>
</li>
</ol>
<blockquote>
<p>后端java</p>
</blockquote>
<ol>
<li><p>打出jar包</p>
</li>
<li><p>创建start.bat</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">start javaw demo.jar --server.port=8081 &amp;</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>双击start.bat运行</p>
</li>
</ol>
<blockquote>
<p>后端python</p>
</blockquote>
<ol>
<li><p>安装运行需要的包</p>
</li>
<li><p>创建start.bat</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">start /min app.py</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>双击start.bat运行</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-title-link" itemprop="url">SQL</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-12-21 16:05:55" itemprop="dateModified" datetime="2021-12-21T16:05:55+08:00">2021-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>20k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>18 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="SQL概念"><a href="#SQL概念" class="headerlink" title="SQL概念"></a>SQL概念</h2><h3 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h3><ul>
<li>唯一标识表中每行的列才成为主键</li>
<li>若多列作为主键，列值的组合必须是唯一的</li>
</ul>
<h3 id="关键字顺序"><a href="#关键字顺序" class="headerlink" title="关键字顺序"></a>关键字顺序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT &gt; DISTINCT &gt; AS &gt; FROM &gt; WHERE &gt; LIKE(REGEXP) &gt; ORDER BY &gt; BINARY &gt; DESC(ASC) &gt; LIMIT</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210420121310952.png" alt="image-20210420121310952"></p>
<h3 id="查看操作-SHOW"><a href="#查看操作-SHOW" class="headerlink" title="查看操作 SHOW"></a>查看操作 SHOW</h3><p><code>SHOW DATABASES</code>：查看数据库</p>
<p><code>SHOW TABLES</code>：查看表 </p>
<p><code>SHOW COLUMNS FROM TABLE</code>或&#96;DES：查看某张表的列</p>
<p><code>SHOW STATUS</code>：显示广泛的服务器状态信息</p>
<p><code>SHOW CREATE DATABASE</code>：创建特定数据库</p>
<p><code>SHOW CREATE TABLE</code>：创建表</p>
<p><code>SHOW GRANTS</code>：显示授予用户</p>
<p><code>SHOW ERRORS</code>&amp;<code>SHOW WARNINGS</code>：显示服务器错误或警告信息</p>
<h3 id="选择操作-SELECT"><a href="#选择操作-SELECT" class="headerlink" title="选择操作 SELECT"></a>选择操作 SELECT</h3><p><code>SELECT * FROM TABLE</code>：从表中选取所有列</p>
<p><code>SELECT DISTINCT id FROM TABLE</code>：从表中返回id列中不同的值<strong>（DISTINCT)</strong></p>
<p><code>SELECT prod_name FROM products LIMIT 5</code>：返回不多于5行</p>
<p><code>SELECT prod_name FROM products LIMIT 5,5</code>：返回从行5开始的5行(从行0计数，行5为第六行)</p>
<p><code>SELECT products.prod_name FROM crashcourse.products</code>：完全限定表示</p>
<blockquote>
<p>排序</p>
</blockquote>
<p><code>SELECT prod_id, prod_price, prod_name FROM products ORDER BY prod_price, prod_name</code>：检索三个列，先按prod_price排序，再按prod_name排序</p>
<p><code>SELECT prod_id, prod_price, prod_name FROM products ORDER BY prod_price DESC, prod_name ASC</code>：排序时按prod_price降序排序，按prod_name升序</p>
<p><code>SELECT prod_price FROM products ORDER BY prod_price DESC LIMIT 1</code>：找出最昂贵物品的价值</p>
<blockquote>
<p>过滤</p>
</blockquote>
<p><code>SELECT prod_name, prod_price FROM products WHERE prod_price = 2.5</code>：检索prod_price为2.5的行</p>
<p><code>SELECT prod_name, prod_price FROM products WHERE prod_price between 5 AND 10</code>：检索prod_price在5和10之间的行（between）</p>
<p><code>SELECT prod_name FROM products WHERE prod_price IS NULL</code>：空值检查</p>
<p><code>SELECT prod_id, prod_price, prod_name FROM products WHERE vend_id =1003 AND prod_price &lt;= 10</code>：AND语句检索条件</p>
<p><code>SELECT prod_id, prod_price, prod_name FROM products WHERE vend_id =1003 OR vend_id = 1003</code>：OR语句检索条件</p>
<p><code>SELECT prod_id, prod_price, prod_name FROM products WHERE (vend_id =1003 OR vend_id = 1003) AND prod_price &gt;= 10</code>：组合使用</p>
<p><code>SELECT prod_id, prod_price, prod_name FROM products WHERE vend_id IN (1002,1003)</code>：IN操作语句，和OR等价，但更快更简洁</p>
<p><code>SELECT prod_id, prod_price, prod_name FROM products WHERE vend_id NOT IN (1002,1003)</code>：NOT操作语句</p>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p><code>SELECT prod_id, prod_name FROM products WHERE prod_name LIKE &#39;%anvil%&#39;</code>：LIKE语法，使用百分号%通配符可匹配任意字符</p>
<p><code>SELECT prod_id, prod_name FROM products WHERE prod_name LIKE &#39;_ ton anvil&#39;</code>：_下划线仅匹配一个字符</p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p><code>SELECT prod_name FROM products WHERE prod_name REGEXP &#39;1000&#39; ORDER BY prod_name</code>：检索prod_name包含文本1000的所有行</p>
<p><code>REGEXP &#39;.000&#39;</code>：匹配任意一个字符</p>
<p><code>REGEXP BINARY &#39;Xxx&#39;</code>：BINARY关键字可区分大小写</p>
<p><code>SELECT prod_name FROM products WHERE prod_name REGEXP &#39;1000|2000&#39; ORDER BY prod_name</code>：‘|’可以表示‘或’关系</p>
<p><code>SELECT prod_name FROM products WHERE prod_name REGEXP &#39;[123] Ton&#39; ORDER BY prod_name</code>：[123]表示1或2或3，[^123]表示除了这些字符外的任何东西。[0-9]表示匹配0-9之间任意数字，[a-z]表示匹配a-z之间任意数字</p>
<p>匹配特殊字符必须加前置’\\‘，如<code>REGEXP &#39;\\.&#39;</code></p>
<blockquote>
<p>字符类</p>
</blockquote>
<table>
<thead>
<tr>
<th>类</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>[:alnum:]</td>
<td>任意字母和数字[a-zA-Z0-9]</td>
</tr>
<tr>
<td>[:alpha:]</td>
<td>任意字符[a-zA-Z]</td>
</tr>
<tr>
<td>[:blank:]</td>
<td>空格和制表[\\t]</td>
</tr>
<tr>
<td>[:cntrl:]</td>
<td>ASCII控制字符(ASCII 0到31和127)</td>
</tr>
<tr>
<td>[:digit:]</td>
<td>任意数字[0-9]</td>
</tr>
<tr>
<td>[:graph:]</td>
<td>与[:print:]相同，但不包含空格</td>
</tr>
<tr>
<td>[:lower:]</td>
<td>任意小写字母[a-z]</td>
</tr>
<tr>
<td>[:print:]</td>
<td>任意可打印字符</td>
</tr>
<tr>
<td>[:punct:]</td>
<td>既不在[:alnum:]又不在[:cntrl:]中的任意字符</td>
</tr>
<tr>
<td>[:space:]</td>
<td>包括空格在内的任意空白字符[\\f\\n\\r\\t\\v]</td>
</tr>
<tr>
<td>[:upper:]</td>
<td>任意大写字母[A-Z]</td>
</tr>
<tr>
<td>[:xdigit:]</td>
<td>任意十六进制数字[a-fA-F0-9]</td>
</tr>
</tbody></table>
<blockquote>
<p>重复元字符</p>
</blockquote>
<table>
<thead>
<tr>
<th>元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>0或多个匹配</td>
</tr>
<tr>
<td>+</td>
<td>1个或多个匹配（等于{1,})</td>
</tr>
<tr>
<td>?</td>
<td>0个或1个匹配（等于{0,1})</td>
</tr>
<tr>
<td>{n}</td>
<td>指定数目的匹配</td>
</tr>
<tr>
<td>{n,}</td>
<td>不少于指定数目的匹配</td>
</tr>
<tr>
<td>{n,m}</td>
<td>匹配数目的范围</td>
</tr>
</tbody></table>
<p><code>SELECT prod_name FROM WHERE prod_name REGEXP &#39;[[:digit:]]&#123;4&#125;&#39; ORDER BY prod_name</code>：匹配任意连在一起的4位数字</p>
<blockquote>
<p>定位元字符</p>
</blockquote>
<table>
<thead>
<tr>
<th>元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>文本的开始</td>
</tr>
<tr>
<td>$</td>
<td>文本的结尾</td>
</tr>
<tr>
<td>[[:&lt;:]]</td>
<td>词的开始</td>
</tr>
<tr>
<td>[[:&gt;:]]</td>
<td>词的结尾</td>
</tr>
</tbody></table>
<p><code>&#39;^[0-9\\.]&#39;</code>：以一个数或小数点开始的字符串</p>
<h3 id="计算字段"><a href="#计算字段" class="headerlink" title="计算字段"></a>计算字段</h3><blockquote>
<p>拼接Concat()</p>
</blockquote>
<p><code>SELECT Concat(vend_name, &#39;(&#39; , vend_country, &#39;)&#39;) FROM vendors ORDER BY vend_name</code>：Concat()拼接，各个串之间用逗号分隔</p>
<blockquote>
<p>去空格RTrim()、LTrim()、Trim()</p>
</blockquote>
<p><code>SELECT Concat(RTrim(vend_name), &#39;(&#39; , vend_country, &#39;)&#39;) FROM vendors ORDER BY vend_name</code>：RTrim用法</p>
<blockquote>
<p>别名（导出列）</p>
</blockquote>
<p><code>SELECT Concat(RTrim(vend_name), &#39;(&#39; , vend_country, &#39;)&#39;) AS vend_title FROM vendors ORDER BY vend_name</code>：创建一个包含指定计算的名为vend_title的计算字段</p>
<blockquote>
<p>执行算术计算</p>
</blockquote>
<p><code>SELECTF prod_id,quantity,item_price,quantity*item_price AS expanded_price FROM orderitems WHERE order_num = 20005</code>：输出四列，最后一列是数量和价格相乘</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><blockquote>
<p>文本处理函数</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Left()</td>
<td>返回串左边的字符</td>
</tr>
<tr>
<td>Length()</td>
<td>返回串的长度</td>
</tr>
<tr>
<td>Locate()</td>
<td>找出串的一个字串</td>
</tr>
<tr>
<td>Lower()</td>
<td>将串转换为小写</td>
</tr>
<tr>
<td>LTrim()</td>
<td>去掉串左边的空格</td>
</tr>
<tr>
<td>Right()</td>
<td>返回串右边的字符</td>
</tr>
<tr>
<td>RTrim()</td>
<td>去掉串右边的空格</td>
</tr>
<tr>
<td>Soundex()</td>
<td>返回串的SOUNDEX值</td>
</tr>
<tr>
<td>SubString()</td>
<td>返回子串的字符</td>
</tr>
<tr>
<td>Upper()</td>
<td>将串转换为大写</td>
</tr>
</tbody></table>
<blockquote>
<p>日期和时间处理函数</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>AddDate()</td>
<td>增加一个日期（天、周等）</td>
</tr>
<tr>
<td>AddTime()</td>
<td>增加一个时间（时、分等）</td>
</tr>
<tr>
<td>CurDate()</td>
<td>返回当前日期</td>
</tr>
<tr>
<td>CurTime()</td>
<td>返回当前时间</td>
</tr>
<tr>
<td>Date()</td>
<td>返回日期时间的日期部分</td>
</tr>
<tr>
<td>DateDiff()</td>
<td>计算两个日期之差</td>
</tr>
<tr>
<td>Date_Add()</td>
<td>高度灵活的日期运算函数</td>
</tr>
<tr>
<td>Date_Format()</td>
<td>返回一个格式化的日期或时间串</td>
</tr>
<tr>
<td>Day()</td>
<td>返回一个日期的天数部分</td>
</tr>
<tr>
<td>DayOfWeek()</td>
<td>对于一个日期，返回对应的星期几</td>
</tr>
<tr>
<td>Hour()</td>
<td>返回一个时间的小时部分</td>
</tr>
<tr>
<td>Minute()</td>
<td>返回一个时间的分钟部分</td>
</tr>
<tr>
<td>Month()</td>
<td>返回一个日期的月份部分</td>
</tr>
<tr>
<td>Now()</td>
<td>返回当前日期和时间</td>
</tr>
<tr>
<td>Second()</td>
<td>返回一个时间的秒部分</td>
</tr>
<tr>
<td>Time()</td>
<td>返回一个日期时间的时间部分</td>
</tr>
<tr>
<td>Year()</td>
<td>返回一个日期的年份部分</td>
</tr>
</tbody></table>
<blockquote>
<p>数值处理函数</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Abs()</td>
<td>返回一个数的绝对值</td>
</tr>
<tr>
<td>Cos()</td>
<td>返回一个角度的余弦</td>
</tr>
<tr>
<td>Exp()</td>
<td>返回一个数的指数值</td>
</tr>
<tr>
<td>Mod()</td>
<td>返回除操作的余数</td>
</tr>
<tr>
<td>Pi()</td>
<td>返回圆周率</td>
</tr>
<tr>
<td>Rand()</td>
<td>返回一个随机数</td>
</tr>
<tr>
<td>Sin()</td>
<td>返回一个角度的正弦</td>
</tr>
<tr>
<td>Sqrt()</td>
<td>返回一个数的平方根</td>
</tr>
<tr>
<td>Tan()</td>
<td>返回一个角度的正切</td>
</tr>
</tbody></table>
<blockquote>
<p>聚集函数</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>AVG()</td>
<td>返回某列的平均值</td>
</tr>
<tr>
<td>COUNT()</td>
<td>返回某列的行数</td>
</tr>
<tr>
<td>MAX()</td>
<td>返回某列的最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>返回某列的最小值</td>
</tr>
<tr>
<td>SUM()</td>
<td>返回某列量之和</td>
</tr>
</tbody></table>
<p><code>SELECT AVG(DISTINCT prod_price) AS ag_price FROM products WHERE vend_id = 1003</code>：<strong>DISTINCT</strong>后置不能跟*</p>
<blockquote>
<p>组合聚集函数</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">COUNT(*) AS num_items,</span><br><span class="line">MIN(prod_price) AS price_min,</span><br><span class="line">MAX(prod_price) AS price_max,</span><br><span class="line">AVG(prod_price) AS price_avg </span><br><span class="line">FROM products;</span><br></pre></td></tr></table></figure>

<h3 id="分组汇总GROUP-BY"><a href="#分组汇总GROUP-BY" class="headerlink" title="分组汇总GROUP BY"></a>分组汇总GROUP BY</h3><p><code>select vend_id, count(*) as num_prods from products group by vend_id with rollup;</code>：<strong>WITH ROLLUP</strong> 可以统计汇总值</p>
<blockquote>
<p>过滤分组HAVING</p>
</blockquote>
<p><code>SELECT cust_id, count(*) AS orders FROM orders GROUP BY cust_id HAVING COUNT(\*) &gt;= 2</code>：<strong>WHERE</strong>在分组前过滤，<strong>HAVING</strong>在分组后过滤</p>
<blockquote>
<p>双重过滤</p>
</blockquote>
<p><code>SELECT vend_id, count(*) AS num_prods FROM products WHERE prod_price &gt;= 10 GROUP BY vend_id HAVING COUNT(\*) &gt;= 2</code>：列出具有2个（含）以上、价格为10（含）以上的产品的供应商</p>
<h3 id="联结"><a href="#联结" class="headerlink" title="联结"></a>联结</h3><blockquote>
<p>主键</p>
</blockquote>
<p>唯一标识</p>
<blockquote>
<p>外键</p>
</blockquote>
<p>其他表的主键</p>
<blockquote>
<p>等值联结（内部联结）</p>
</blockquote>
<p><code>SELECT vend_name, prod_name, prod_price FROM vendors, products WHERE vendors.vend_id = products.vend_id ORDER BY vend_name, prod_name</code>：通过WHERE创建联结，否则会返回笛卡尔积</p>
<p><code>SELECT vend_name, prod_name, prod_price FROM vendors INNER JOIN products ON vendors.vend_id = products.vend_id</code></p>
<blockquote>
<p>自联结</p>
</blockquote>
<p><code>SELECT p1.prod_id, p1.prod_name FROM products AS p1, products AS p2 WHERE p1.vend_id = p2.vend_id AND p2.prod_id = &#39;DTNTR&#39;</code>：自联结需要起表别名</p>
<blockquote>
<p>自然联结</p>
</blockquote>
<blockquote>
<p>外部联结</p>
</blockquote>
<p><code>SELECT customers.cust_id, orders.order_num FROM customers LEFT OUTER JOIN orders ON customers.cust_id = orders.cust_id</code>：(LEFT\RIGHT) OUTER JOIN 是外部联结，left表示选择左边表的所有行，right表示选择右边表的所有行。</p>
<blockquote>
<p>表别名</p>
</blockquote>
<p><code>FROM customers AS c, orders AS o, orderitems AS oi</code>：表别名只在查询执行中使用不返回到客户机</p>
<h3 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h3><blockquote>
<p>UNION</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT vend_id, prod_id, prod_price</span><br><span class="line">FROM products</span><br><span class="line">WHERE prod_price &lt;= 5</span><br><span class="line">UNION</span><br><span class="line">SELECT vend_id, prod_id, prod_price</span><br><span class="line">FROM products</span><br><span class="line">WHERE vend_id IN (1001,1002);</span><br><span class="line">/******************/</span><br><span class="line">SELECT vend_id, prod_id, prod_price</span><br><span class="line">FROM products</span><br><span class="line">WHERE prod_price &lt;= 5</span><br><span class="line">OR vend_id IN (1001,1002)</span><br></pre></td></tr></table></figure>

<p>规则：1、UNION必须由两条或两条以上SELECT语句组成；2、UNION中每个查询必须包含相同的列、表达式或聚集函数；3、列数据必须兼容</p>
<p>注意：对组合查询进行排序，ORDER BY子句必须出现在最后一条SELECT语句之后</p>
<blockquote>
<p>UNION ALL</p>
</blockquote>
<p>不过滤重复行</p>
<h3 id="全文本搜索"><a href="#全文本搜索" class="headerlink" title="全文本搜索"></a>全文本搜索</h3><p>支持引擎：MyISAM</p>
<p>不支持：InnoDB</p>
<p>在创建表时需要使用<code>FULLTEXT(column_name)</code>来建立索引</p>
<p><code>SELECT note_text FROM productnotes WHERE Match(note_text) Against(&#39;rabbit&#39;)</code>：Match中填写和FULLTEXT中的一致，Against中填写需要匹配的词，返回匹配的行</p>
<blockquote>
<p>查询扩展</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT note_text FROM productnotes WHERE Match(note_text) Against(&#x27;anvils&#x27; WITH QUERY EXPANSION);</span><br></pre></td></tr></table></figure>

<p>增加返回行数，匹配相近行</p>
<blockquote>
<p>布尔文本搜索</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT note_text</span><br><span class="line">FROM productnotes</span><br><span class="line">WHERE Match(note_text) Against(&#x27;heavy -rope*&#x27; IN BOOLEAN MODE);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>布尔操作符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>包含，词必须存在</td>
</tr>
<tr>
<td>-</td>
<td>排除，词必须不出现</td>
</tr>
<tr>
<td>&gt;</td>
<td>包含，且增加等级值</td>
</tr>
<tr>
<td>&lt;</td>
<td>包含，且减少等级值</td>
</tr>
<tr>
<td>()</td>
<td>把词组成子表达式</td>
</tr>
<tr>
<td>~</td>
<td>取消一个词的排序值</td>
</tr>
<tr>
<td>*</td>
<td>词尾的通配符</td>
</tr>
<tr>
<td>“”</td>
<td>定义一个短语</td>
</tr>
</tbody></table>
<h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO customers(cust_name,cust_address,cust_city,cust_state,cust_country,cust_contact,cust_email)</span><br><span class="line">VALUES(&#x27;Pep E. LaPew&#x27;,&#x27;100 Main Street&#x27;,&#x27;Los Angeles&#x27;,&#x27;CA&#x27;,&#x27;90046&#x27;,&#x27;USA&#x27;,NULL,NULL);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>INSERT SELECT</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO customers(cust_id,cust_contact)</span><br><span class="line">SELECT cust_id,cust_contact FROM custnew;</span><br></pre></td></tr></table></figure>

<h3 id="更新和删除数据"><a href="#更新和删除数据" class="headerlink" title="更新和删除数据"></a>更新和删除数据</h3><blockquote>
<p>UPDATE</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE IGNORE customers</span><br><span class="line">SET cust_email = &#x27;elmer@fudd.com&#x27;</span><br><span class="line">WHERE cust_id = 10005;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>DELETE</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*删除行*/</span><br><span class="line">DELETE FROM customers</span><br><span class="line">WHERE cust_id = 10005;</span><br><span class="line">/*删除表*/</span><br><span class="line">TRUNCATE TABLE</span><br></pre></td></tr></table></figure>

<h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE vendors IF NOT EXISTS</span><br><span class="line">(</span><br><span class="line">    vend_id    int      NOT NULL AUTO_INCREMENT,</span><br><span class="line">    order_date datetime NOT NULL,</span><br><span class="line">    cust_id    int      NOT NULL,</span><br><span class="line">    quantity   int      NOT NULL DEFAULT 1,</span><br><span class="line">    PRIMARY KEY (order_num)</span><br><span class="line">) ENGINE=InnoDB</span><br><span class="line"></span><br><span class="line">/*确定 AUTO_INCREMENT 值*/</span><br><span class="line">SELECT last_insert_id()</span><br></pre></td></tr></table></figure>

<h4 id="更新表"><a href="#更新表" class="headerlink" title="更新表"></a>更新表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/*给表添加一个列*/</span><br><span class="line">ALTER TABLE vendors</span><br><span class="line">ADD vend_phone CHAR(20);</span><br><span class="line">/*删除刚刚添加的列*/</span><br><span class="line">ALTER TABLE vendors</span><br><span class="line">DROP COLUMN vend_phone;</span><br><span class="line">/*定义外键*/</span><br><span class="line">ALTER TABLE orderitems</span><br><span class="line">ADD CONSTRAINT fk_orderitems_orders</span><br><span class="line">FOREIGN KEY (order_num) REFERENCES orders (order_num);</span><br></pre></td></tr></table></figure>

<h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE customer32;</span><br></pre></td></tr></table></figure>

<h4 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME TABLE customers2 TO customers;</span><br></pre></td></tr></table></figure>

<h3 id="引擎"><a href="#引擎" class="headerlink" title="引擎"></a>引擎</h3><p><code>InnoDB</code>：可靠的事务处理引擎，不支持全文本搜索；开销大，加锁慢，会出现死锁；锁定粒度最小，发生锁冲突的概率也最低，并发度最高，支持行级锁</p>
<p><code>MEMORY</code>：功能等同于MyISAM，数据存储在内存中，速度很快，特别适合于临时表；开销小，加锁快；无死锁，锁定粒度大，发生锁冲突概率高，并发度最低</p>
<p><code>MyISAM</code>：性能极高，支持全文本搜索，不支持事务处理</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210420114802810.png" alt="image-20210420114802810"></p>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/*创建视图*/</span><br><span class="line">CREATE VIEW XXX AS ...</span><br><span class="line">/*查看视图*/</span><br><span class="line">SHOW CREATE VIEW viewname</span><br><span class="line">/*删除视图*/</span><br><span class="line">DROP XXXX</span><br><span class="line">/*更新视图*/</span><br><span class="line">CREATE OR REPLACE VIEW</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/*创建视图例子*/</span><br><span class="line">CREATE VIEW productcustomers AS </span><br><span class="line">SELECT cust_name, cust_contact, prod_id</span><br><span class="line">FROM customers, orders, orderitems</span><br><span class="line">WHERE customers.cust_id = orders.cust_id</span><br><span class="line">    AND orderitems.order_num = orders.order_num;</span><br><span class="line">/*使用视图例子*/    </span><br><span class="line">SELECT cust_name, cust_contact</span><br><span class="line">FROM productcustomers</span><br><span class="line">WHERE prod_id = &#x27;TNT2&#x27;;    </span><br></pre></td></tr></table></figure>

<blockquote>
<p>更新视图</p>
</blockquote>
<p>如果视图定义有以下操作，则不能进行视图的更新</p>
<ol>
<li>分组（使用GROUP BY 和HAVING）</li>
<li>联结</li>
<li>子查询</li>
<li>并</li>
<li>聚集函数（Min()、Count()、Sum()等）</li>
<li>DISTINCT</li>
<li>导出（计算列）</li>
</ol>
<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/*创建存储过程*/</span><br><span class="line">/*当使用mysql命令行客户机时，‘；’分隔符在存储过程内会被解释，而无法成为存储过程的成分*/</span><br><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE productpring(</span><br><span class="line">    OUT p1 DECIMAL(8,2)</span><br><span class="line">    OUT ph DECIMAL(8,2)</span><br><span class="line">    OUT pa DECIMAL(8,2))</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT Min(prod_price)</span><br><span class="line">    INTO p1</span><br><span class="line">    FROM products;</span><br><span class="line">    SELECT Max(prod_price)</span><br><span class="line">    INTO ph</span><br><span class="line">    FROM products;</span><br><span class="line">    SELECT Avg(prod_price)</span><br><span class="line">    INTO pa</span><br><span class="line">    FROM products;</span><br><span class="line">END //</span><br><span class="line">/*DELIMITER //将//作为新的语句结束分隔符，只有\符号无法作为语句分隔符*/</span><br><span class="line"></span><br><span class="line">/*调用存储过程,需要传参*/</span><br><span class="line">CALL productpricing(@pricelow,</span><br><span class="line">                       @pricehigh,</span><br><span class="line">                       @priceaverage);</span><br><span class="line"></span><br><span class="line">/*删除存储过程*/</span><br><span class="line">DROP PROCEDURE productpricing;</span><br><span class="line"></span><br><span class="line">/*检查存储过程*/</span><br><span class="line">SHOW CREATE PROCEDURE ordertotal;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>存储完整过程</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">-- Name:ordertotal</span><br><span class="line">-- Parameters: onumber = order number</span><br><span class="line">--             taxable = 0 if not taxable, 1 if taxable</span><br><span class="line">--             ototal  = order total variable</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE ordertotal(</span><br><span class="line">    IN onumber INT,</span><br><span class="line">    IN taxable BOOLEAN,</span><br><span class="line">    OUT ototal DECIMAL(8,2)</span><br><span class="line">) COMMENT &#x27;Obtain order total, optionally adding tax&#x27;</span><br><span class="line">BEGIN</span><br><span class="line">    -- Declare variable for total </span><br><span class="line">    DECLARE total DECIMAL(8,2);</span><br><span class="line">    -- Declare tax percentage</span><br><span class="line">    DECLARE taxrate INT DEFAULT 6;</span><br><span class="line"></span><br><span class="line">    --Get the order total</span><br><span class="line">    SELECT Sum(item_price*quantity)</span><br><span class="line">    FROM orderitems</span><br><span class="line">    WHERE order_num = onumber</span><br><span class="line">    INTO total;</span><br><span class="line"></span><br><span class="line">    -- Is this taxable?</span><br><span class="line">    IF taxable THEN</span><br><span class="line">        -- Yes, so add taxrate to the total</span><br><span class="line">        SELECT total+(total/100*taxrate) INTO total;</span><br><span class="line">    END IF;</span><br><span class="line"></span><br><span class="line">    -- And finally, save to out variable</span><br><span class="line">    SELECT total INTO ototal;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>

<p><code>COMMENT</code>：表示注释</p>
<p><code>DECIMAL(8,2)</code>：8表示总共8位数，2表示后两位为小数</p>
<h3 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">-- 开启游标</span><br><span class="line">OPEN cursorname;</span><br><span class="line">-- 关闭游标</span><br><span class="line">Close cursorname;</span><br><span class="line"></span><br><span class="line">/*实例*/</span><br><span class="line">CREATE PROCEDURE processorders()</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    -- Declare local variables</span><br><span class="line">    DECLARE done BOOLEAN DEFAYLT 0;</span><br><span class="line">    DECLARE o INT;</span><br><span class="line">    DECLARE t DECIMAL(8,2);</span><br><span class="line"></span><br><span class="line">    -- Declare the cursor</span><br><span class="line">    DECLARE ordernumbers CURSOR</span><br><span class="line">    FOR </span><br><span class="line">    SELECT order_num FROM orders;</span><br><span class="line"></span><br><span class="line">    -- Declare continue handler </span><br><span class="line">    DECLARE CONTINUE HANDLER FOR SQLSTATE &#x27;02000&#x27; SET done=1;</span><br><span class="line"></span><br><span class="line">    -- Create a table to store the results</span><br><span class="line">    CREATE TABLE IF NOT EXISTS ordertotals</span><br><span class="line">        (order_num INT, total DECIMAL(8,2));</span><br><span class="line"></span><br><span class="line">    -- Open the cursor</span><br><span class="line">    OPEN ordernumbers;</span><br><span class="line"></span><br><span class="line">    -- Loop through all rows</span><br><span class="line">    REPEAT</span><br><span class="line"></span><br><span class="line">        -- Get order number</span><br><span class="line">        DETCH ordernumbers INTO o;</span><br><span class="line"></span><br><span class="line">        -- Get the total for this order</span><br><span class="line">        CALL ordertotal(o,1,t);</span><br><span class="line"></span><br><span class="line">        -- Insert order and total into ordertotals</span><br><span class="line">        INSERT INTO ordertotals(order_num, total)</span><br><span class="line">        VALUES(o,t);</span><br><span class="line"></span><br><span class="line">    -- End of loop</span><br><span class="line">    UNTIL done END REPEAT;</span><br><span class="line"></span><br><span class="line">    --Close the cursor;</span><br><span class="line">    CLOSE ordernumbers;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>

<p><code>SQLSTATE &#39;02000&#39;</code>：是一个未找到条件时的状态</p>
<h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><p>触发器响应以下指令</p>
<ol>
<li>DELETE</li>
<li>INSERT</li>
<li>UPDATE</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-- 创建触发器,将信息存入asd变量中，使用SELECT @asd;查看</span><br><span class="line">CREATE TRIGGER newproduct AFTER INSERT ON products</span><br><span class="line">FOR EACH ROW SELECT &#x27;Product added&#x27; INTO @asd;</span><br><span class="line"></span><br><span class="line">-- INSERT触发器，返回新生成的订单号</span><br><span class="line">CREATE TRIGGER neworder AFTER INSERT ON orders</span><br><span class="line">FOR EACH ROW SELECT NEW.order_num;</span><br><span class="line"></span><br><span class="line">-- DELETE触发器,OLD是只读表，访问将被删除的行</span><br><span class="line">CREATE TRIGGER delteorder BEFORE DELETE ON orders</span><br><span class="line">FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    INSERT INTO archive_orders(order_num, order_date, cust_id)</span><br><span class="line">    VALUES(OLD.roder_num, OLD.order_date, OLD.cust_id);</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">-- UPDATE触发器，OLD虚拟表可访问更新前的值，NEW虚拟表访问更新后的值</span><br><span class="line">CREATE TRIGGER updatevendor BEFORE UPDATE ON venders</span><br><span class="line">FOR EACH ROW SET NEW.vend_state = Upper(New.vend_state)</span><br><span class="line"></span><br><span class="line">-- 删除触发器</span><br><span class="line">DROP TRIGGER newproduct;</span><br><span class="line"></span><br><span class="line">--</span><br></pre></td></tr></table></figure>

<h3 id="事务处理"><a href="#事务处理" class="headerlink" title="事务处理"></a>事务处理</h3><p>事务（transactioin）：指一组SQL语句</p>
<p>回退（rollback）：指撤销指定SQL语句的过程</p>
<p>提交（commit）：指将未存储的SQL语句结果写入数据库表</p>
<p>保留点（savepoint）：指事务处理中设置的临时占位符，可以对其发布回退</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- ROLLBACK</span><br><span class="line">-- 开启事务处理，可通过ROLLBACK撤销其中的INSERT,UPDATE和DELETE语句</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM ordertotals;</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- COMMIT，在事务处理中必须主动提交，才会生效，若第二条delete失败，则前面的delete也自动撤销</span><br><span class="line">START TRANSACTION</span><br><span class="line">DELETE FROM orderitems WHERE order_num = 20010;</span><br><span class="line">DELETE FROM orders WHERE order_num = 20010;</span><br><span class="line">COMMIT</span><br><span class="line"></span><br><span class="line">-- SAVEPOINT，支持部分回退</span><br><span class="line">SAVEPOINT delete1;</span><br><span class="line">ROLLBACK TO delete1;</span><br></pre></td></tr></table></figure>

<h3 id="安全管理"><a href="#安全管理" class="headerlink" title="安全管理"></a>安全管理</h3><blockquote>
<p>用户管理</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 创建用户账号</span><br><span class="line">CREATE USER ben IDENTIFIED BY &#x27;password&#x27;;</span><br><span class="line"></span><br><span class="line">-- 重命名</span><br><span class="line">RENAME USER ben TO bfota</span><br><span class="line"></span><br><span class="line">-- 删除用户</span><br><span class="line">DROP USER bfota;</span><br><span class="line"></span><br><span class="line">-- 查看用户权限</span><br><span class="line">SHOW GRANTS FOR bfota;</span><br><span class="line"></span><br><span class="line">-- 设置用户权限, 允许用户在crashcourse数据库的所有表上使用SELECT</span><br><span class="line">GRANT SELECT ON crashcourse.* TO bfota;</span><br><span class="line"></span><br><span class="line">-- 撤销用户权限</span><br><span class="line">REVOKE SELECT ON crashcourse.* FROM bfota;</span><br><span class="line"></span><br><span class="line">-- 更改口令</span><br><span class="line">SET PASSWORD FOR bfota = Password(&#x27;n3dsifnfea&#x27;);-- 为他人更改</span><br><span class="line">SET PASSWORD = Password(&#x27;lfasdfasd&#x27;);-- 为自己更改</span><br></pre></td></tr></table></figure>

<h3 id="数据库维护"><a href="#数据库维护" class="headerlink" title="数据库维护"></a>数据库维护</h3><blockquote>
<p>备份数据</p>
</blockquote>
<p>备份前需要先<code>FLUSH TABLES</code>来刷新未写数据</p>
<ol>
<li><code>mysqldump</code>：转储所有数据库内容到某个外部文件</li>
<li><code>mysqlhotcopy</code>：从一个数据库复制所有数据</li>
<li>BACKUP TABLE<code>或</code>SELECT INTO OUTFILE<code>：转储所有数据到某个外部文件，给出文件名，且文件不能已存在，可以使用</code>RESTORE&#96;恢复</li>
</ol>
<blockquote>
<p>维护</p>
</blockquote>
<ol>
<li><code>ANALYZE TABLE orders</code>：检查表键是否正确</li>
<li><code>CHECK TABLE orders</code>：检查表的各种问题</li>
</ol>
<blockquote>
<p>日志</p>
</blockquote>
<ul>
<li>错误日志，hostname.err</li>
<li>查询日志，hostname.log</li>
<li>二进制日志，hostname-bin</li>
<li>缓慢查询日志，hostname-slow.log</li>
</ul>
<p>刷新日志：<code>FLUSH LOGS</code></p>
<h3 id="改善性能"><a href="#改善性能" class="headerlink" title="改善性能"></a>改善性能</h3><p>查看当前设置：</p>
<p><code>SHOW VARIABLES</code></p>
<p><code>SHOW STATUS</code></p>
<p>显示所有活动线程：</p>
<p><code>SHOW PROCESSLIST</code></p>
<h2 id="csv文件的导入导出"><a href="#csv文件的导入导出" class="headerlink" title="csv文件的导入导出"></a>csv文件的导入导出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">--加载数据到建好的数据库表中</span><br><span class="line">LOAD data infile &#x27;D:/ProgramData/MySQL/MySQL Server 8.0_data/Uploads/jl_dl_.csv&#x27; into table jl_dl_ fields terminated by &#x27;,&#x27; IGNORE 1 LINES;</span><br><span class="line">LOAD data infile &#x27;D:/ProgramData/MySQL/MySQL Server 8.0_data/Uploads/resource.csv&#x27; into table resource fields terminated by &#x27;,&#x27; IGNORE 1 LINES;</span><br><span class="line">--输出查询结果到csv文件中,带表名</span><br><span class="line">SELECT</span><br><span class="line">    &#x27;NMS_ORIG_RES_ID&#x27;                 ,</span><br><span class="line">    &#x27;CARD_ID&#x27;                         ,</span><br><span class="line">    &#x27;SUPER_RES_ID&#x27;                    ,</span><br><span class="line">    &#x27;SUPER_RES_POSITION_ID&#x27;           ,</span><br><span class="line">    &#x27;MANAGE_IPADDRESS&#x27;              ,</span><br><span class="line">    &#x27;EMS_ORIG_RES_NAME&#x27;               ,</span><br><span class="line">    &#x27;TECHNICAL_MODE&#x27;                  ,</span><br><span class="line">    &#x27;BROADBAND_SUB&#x27;                   ,</span><br><span class="line">    &#x27;IPTV_SUB&#x27;                        ,</span><br><span class="line">    &#x27;identityVOIP_SUB&#x27;                ,</span><br><span class="line">    &#x27;BROADBAND_FTTH_NUM&#x27;              ,</span><br><span class="line">    &#x27;BROADBAND_FTTB_LAN_NUM&#x27;          ,</span><br><span class="line">    &#x27;BROADBAND_FTTB_DSL_NUM&#x27;          ,</span><br><span class="line">    &#x27;BROADBAND_FTTH_PORTNUM&#x27;          ,</span><br><span class="line">    &#x27;BROADBAND_FTTB_LAN_PORTNUM&#x27;      ,</span><br><span class="line">    &#x27;BROADBAND_FTTB_DSL_PORTNUM&#x27;      ,</span><br><span class="line">    &#x27;BROADBAND_FTTH_ONTNUM&#x27;           ,</span><br><span class="line">    &#x27;BROADBAND_FTTB_LAN_USEDPORTNUM&#x27;  ,</span><br><span class="line">    &#x27;BROADBAND_FTTB_DSL_USEDPORTNUM&#x27;  ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_10M_NUM&#x27;         ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_20M_NUM&#x27;         ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_50M_NUM&#x27;         ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_100M_NUM&#x27;        ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_200M_NUM&#x27;        ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_300M_NUM&#x27;        ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_500M_NUM&#x27;        ,</span><br><span class="line">    &#x27;BROADBAND_BELOW_1000M_NUM&#x27;       ,</span><br><span class="line">    &#x27;BROADBAND_ABOVE_1000M_NUM&#x27;       ,</span><br><span class="line">    &#x27;ADDR_FROM&#x27;                       ,</span><br><span class="line">    &#x27;STAND_NAME&#x27;</span><br><span class="line">union select *</span><br><span class="line">from jl_dl_</span><br><span class="line">into outfile &#x27;D:/ProgramData/MySQL/MySQL Server 8.0_data/Uploads/1.csv&#x27;</span><br><span class="line">CHARACTER SET gbk FIELDS TERMINATED BY &#x27;,&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="创建相同结构表"><a href="#创建相同结构表" class="headerlink" title="创建相同结构表"></a>创建相同结构表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table A</span><br><span class="line">default charset = utf8 comment &#x27;xxx&#x27;</span><br><span class="line">as select * from B where 1=2;</span><br></pre></td></tr></table></figure>

<h2 id="case-when"><a href="#case-when" class="headerlink" title="case when"></a>case when</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yazdao/archive/2009/12/09/1620482.html">https://www.cnblogs.com/yazdao/archive/2009/12/09/1620482.html</a></p>
<h2 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//查看存储引擎</span><br><span class="line">show variables like &#x27;%storage_engine%&#x27;;</span><br><span class="line">//查看字符集</span><br><span class="line"> show variables like &#x27;%char%&#x27;;</span><br><span class="line"> show variables like &#x27;names%&#x27;;</span><br><span class="line"> //查看安全路径</span><br><span class="line"> show variables like &#x27;secure_file_priv&#x27;;</span><br></pre></td></tr></table></figure>

<h1 id="高级mysql"><a href="#高级mysql" class="headerlink" title="高级mysql"></a>高级mysql</h1><ul>
<li>mysql内核</li>
<li>sql优化工程师</li>
<li>mysql服务器的优化</li>
<li>各种参数常量设定</li>
<li>查询语句优化</li>
<li>主从复制</li>
<li>软硬件升级</li>
<li>容灾备份</li>
<li>sql编程</li>
</ul>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><blockquote>
<p>单值索引</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from user where name = &#x27;&#x27;;</span><br><span class="line">create index idx_user_name on user(name);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>复合索引</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from user where name = &#x27;&#x27; and email = &#x27;&#x27;;</span><br><span class="line">create index idx_user_nameEmail on user(name,Email);</span><br></pre></td></tr></table></figure>

<h3 id="索引的优劣"><a href="#索引的优劣" class="headerlink" title="索引的优劣"></a>索引的优劣</h3><p>原理：B+树（多路搜索树），有聚集索引、次要索引、复合索引、前缀索引，唯一索引等，还有哈希索引</p>
<p>索引：排好序的快速查找数据结构</p>
<p>优势：</p>
<ul>
<li><p>类似大学图书馆建书目索引，提高数据检索的效率，降低数据库IO成本</p>
</li>
<li><p>通过索引列对数据进行排序，降低数据排序的成本，降低了CPU的消耗</p>
</li>
</ul>
<p>劣势：</p>
<ul>
<li>占用空间</li>
<li>降低更新表速度，（插入、更新、删除）</li>
</ul>
<p>索引分类：</p>
<ul>
<li>单值索引：一个索引只包含单个列，一个表可以有多个单列索引（建议5个）</li>
<li>唯一索引：索引列的值必须唯一，但允许有空值</li>
<li>符合索引：一个索引包含多个列</li>
</ul>
<p>基本语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//创建索引</span><br><span class="line">CREATE [UNIQUE] INDEX indexName ON mytable(columnname(length));</span><br><span class="line">ALTER mytable ADD [UNIQUE] INDEX [indexName] ON (columnname(length));</span><br><span class="line"></span><br><span class="line">//添加主键，主键就是唯一索引</span><br><span class="line">ALTER TABLE table ADD PRIMARY KEY(column_list);</span><br><span class="line"></span><br><span class="line">//全文索引</span><br><span class="line">ALTER TABLE table ADD FULLTEXT index_name(column_list);</span><br><span class="line"></span><br><span class="line">//删除索引</span><br><span class="line">DROP INDEX [indexName] ON mytable;</span><br><span class="line"></span><br><span class="line">//查看索引</span><br><span class="line">SHOW INDEX FR OM table_name;</span><br></pre></td></tr></table></figure>

<p>创建索引情况：</p>
<ul>
<li>主键自动建立唯一索引</li>
<li>频繁作为查询条件的字段应该创建索引</li>
<li>查询中与其他表关联的字段，外键关系建立索引</li>
<li>频繁更新的字段不适合创建索引</li>
<li>where条件里用不到的字段不创建索引</li>
<li>在高并发下倾向创建组合索引</li>
<li>查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度</li>
<li>查询中统计或分组字段</li>
</ul>
<p>不需创建索引：</p>
<ul>
<li>表记录太少</li>
<li>经常增删改的表</li>
<li>数据重复且分布平均的表字段</li>
</ul>
<h3 id="防止索引失效"><a href="#防止索引失效" class="headerlink" title="防止索引失效"></a>防止索引失效</h3><ul>
<li><p>左前缀法则：若索引多列，则遵循从左到右查询，不跳过</p>
</li>
<li><p>不在索引上做任何操作（计算、函数、类型转换）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//name为索引列</span><br><span class="line">select * from staffs where left(name,4) = &#x27;july&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>存储引擎不能使用索引中范围条件右边的索引列</p>
</li>
<li><p>尽量使用覆盖索引（只访问索引的查询（索引列和查询列一致））</p>
</li>
<li><p>mysql在使用不等于（!&#x3D;或&lt;&gt;）的时候无法使用索引会导致全表扫描</p>
</li>
<li><p>is null, is not null 也无法使用索引而导致全表扫描</p>
</li>
<li><p>like以通配符开头(‘’%abc…’)会导致索引失效而导致全表扫描</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 解决like&#x27;%字符串%&#x27;时索引不被使用的方法？</span><br><span class="line">使用覆盖索引</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串不加单引号索引失效（产生类型转换）</p>
</li>
<li><p>少用OR，用它连接时会导致索引失效</p>
</li>
</ul>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><blockquote>
<p>MySQL Query Optimizer</p>
</blockquote>
<blockquote>
<p>MySQL 常见瓶颈</p>
</blockquote>
<ul>
<li>CPU：饱和时</li>
<li>IO：磁盘装入数据远大于内存容量时</li>
<li>服务器硬件性能：<code>top</code>、<code>free</code>、<code>iostat</code>、<code>vmstat</code>来查看系统的性能状态</li>
</ul>
<h3 id="查看当前sql语句性能"><a href="#查看当前sql语句性能" class="headerlink" title="查看当前sql语句性能"></a>查看当前sql语句性能</h3><blockquote>
<p>EXPLAIN</p>
</blockquote>
<p>使用EXPLAIN关键字可以模拟优化器执行SQL查询语句，从而知道MYSQL是如何处理你的SQL语句的，分析查询语句或是表结构的性能瓶颈</p>
<p>可看到信息：</p>
<ul>
<li><p>表执行顺序</p>
</li>
<li><p>数据读取操作的操作类型（sekect_type）</p>
</li>
<li><p>哪些索引可以被使用</p>
</li>
<li><p>哪些索引被实际引用</p>
</li>
<li><p>表之间的引用</p>
</li>
<li><p>每张表有多少行被优化器查询</p>
</li>
</ul>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210420180237922.png" alt="image-20210420180237922"></p>
<ul>
<li><p>id</p>
<ul>
<li>id相同，执行顺序由上至下</li>
<li>id不同，若子查询，id序号递增，id越大执行优先级越高</li>
<li>id相同和不同，同时存在</li>
</ul>
</li>
<li><p>select_type</p>
<ul>
<li><p>simple：简单的select查询，不包含子查询和union</p>
</li>
<li><p>primary：最外层查询</p>
</li>
<li><p>subquery：子查询</p>
</li>
<li><p>derived：子查询被标记为derived</p>
</li>
<li><p>union：若第二个select出现在union之后，则被标记为union，若union包含在from子句的子查询中，外层select将被标记为：derived</p>
</li>
<li><p>union result：union获取结果的select</p>
</li>
</ul>
</li>
<li><p>type</p>
<p>​    显示查询使用了何种类型，从最好到最差依次是</p>
<p>​    system&gt;const&gt;eq_ref&gt;ref&gt;range&gt;index&gt;ALL</p>
<ul>
<li>system ：表只有一行记录（等于系统表）</li>
<li>const：通过索引一次就找到了，只匹配一行数据</li>
<li>eq_ref：唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配，常见于主键或唯一索引扫描</li>
<li>ref：非唯一性索引扫描，返回匹配某个单独值的所有行</li>
<li>range：只检索给定范围的行，使用一个索引选择行。key列显示使用了哪个索引，一般就是在你的where语句红出现了between、&lt;、&gt;、in等的查询，比全表扫描好</li>
<li>index：只遍历索引树。</li>
</ul>
</li>
<li><p>possible_keys：显示可能应用在这张表中的索引，一个或多个，不一定被查询实际使用</p>
</li>
<li><p>key：实际使用的索引，如果为NULL，则没有使用索引，查询中若使用了覆盖索引，则该索引仅出现在key列表中。</p>
</li>
<li><p>key_len：表示索引中使用的字节数，索引中使用的字节数，保证精确性情况下，长度越短越好，该值表示索引字段最大可能长度，并非实际使用长度。</p>
</li>
<li><p>ref：显示索引的哪一列被使用了</p>
</li>
<li><p>rows：根据表统计信息及索引选用情况，大致估算出找到所需的记录所需要读取的行数</p>
</li>
<li><p>extra：包含不适合在其他列中显示但十分重要的额外信息</p>
<ul>
<li>Using filesort：不按照表内索引顺序读取，自己又产生了一次排序，需要优化，危险</li>
<li>Using temporary：新建了临时表，常见于order by和group by，非常危险</li>
<li>Using index：表示响应select操作中使用了覆盖索引，避免访问了表的数据行，效率不错，如果同时出现了Using where，表明索引被用来执行索引键值的查找，如果没有出现，则表明索引用来读取数据而非执行查找动作。</li>
<li>Using where：使用了where查询</li>
<li>Using join buffer：使用了连接缓存</li>
<li>impossible where：where子句的值总是false，不能获取任何元组</li>
<li>select tables optimized away：在没有GROUPBY子句情况下，基于索引优化MIN&#x2F;MAX操作或者对于MyISAM存储引擎优化COUNT(*)操作，不必等到执行阶段再进行计算，查询执行计划生成的阶段即完成优化</li>
<li>distinct：优化distinct操作，在找到第一匹配的元组后即停止找同样值的动作。</li>
</ul>
</li>
</ul>
<blockquote>
<p>show profile</p>
</blockquote>
<p>分析当前会话中sql语句执行的资源消耗情况的工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//执行一条sql语句后</span><br><span class="line">show profiles;</span><br><span class="line">//出现</span><br><span class="line">show profile cpu,block io for query Query_ID;</span><br><span class="line">/*Query_ID为#上步骤中show profiles列表中的Query_ID*/</span><br></pre></td></tr></table></figure>

<ul>
<li>show profile的常用查询参数。</li>
</ul>
<p>①ALL：显示所有的开销信息。</p>
<p>②BLOCK IO：显示块IO开销。</p>
<p>③CONTEXT SWITCHES：上下文切换开销。</p>
<p>④CPU：显示CPU开销信息。</p>
<p>⑤IPC：显示发送和接收开销信息。</p>
<p>⑥MEMORY：显示内存开销信息。</p>
<p>⑦PAGE FAULTS：显示页面错误开销信息。</p>
<p>⑧SOURCE：显示和Source_function，Source_file，Source_line相关的开销信息。</p>
<p>⑨SWAPS：显示交换次数开销信息。</p>
<ul>
<li>日常开发需注意的结论。</li>
</ul>
<p>①converting HEAP to MyISAM：查询结果太大，内存不够，数据往磁盘上搬了。</p>
<p>②Creating tmp table：创建临时表。先拷贝数据到临时表，用完后再删除临时表。</p>
<p>③Copying to tmp table on disk：把内存中临时表复制到磁盘上，危险！！！</p>
<p>④locked。</p>
<p>如果在show profile诊断结果中出现了以上4条结果中的任何一条，则sql语句需要优化。</p>
<h3 id="优化建议"><a href="#优化建议" class="headerlink" title="优化建议"></a>优化建议</h3><h4 id="小表驱动大表"><a href="#小表驱动大表" class="headerlink" title="小表驱动大表"></a>小表驱动大表</h4><p>优化原则，使用小的数据集驱动大的数据集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//当B的数据集小于A的数据集时，用in优于exists</span><br><span class="line">select* from A where id in (select id from B)</span><br><span class="line">等价于:</span><br><span class="line">for select id from B</span><br><span class="line">for select * from A where A.id = B.id</span><br><span class="line"></span><br><span class="line">//当A的数据集小于B的数据集时，用exists优于in</span><br><span class="line">select * from A where exists (select 1 from B wehre B.id = A.id)</span><br><span class="line">等价于：</span><br><span class="line">for select * from A</span><br><span class="line">for select * from B where B.id = A.id</span><br></pre></td></tr></table></figure>

<h4 id="order-by和group-by"><a href="#order-by和group-by" class="headerlink" title="order by和group by"></a>order by和group by</h4><ul>
<li><p>尽量用<code>using index</code>方式排序，避免用<code>using filesort</code>方式排序</p>
</li>
<li><p>遵循索引键的最佳左前缀</p>
</li>
<li><p>filesort有两种算法，单路排序和双路排序</p>
<ul>
<li>双路排序：从磁盘读取排序字段，在buffer进行排序，再从磁盘读取其他字段</li>
<li>单路排序：从磁盘读取所有字段，在buffer对排序字段排序，避免了第二次读取数据，但占用内存多。</li>
<li>存在问题：单路为后出的算法，性能更好。但是受限于sort_buffer容量，可能出现更多次I&#x2F;O操作</li>
</ul>
</li>
<li><p>优化策略：</p>
<ul>
<li><p>order by时尽量不用 select *</p>
<p>当Query字段大小总和小于max_length_for_sort_data而且排序字段不是TEXT|BLOB类型时，会用单路排序，否则使用多路排序；</p>
<p>两种算法数据都有可能超出sort_buffer的容量，超出后会创建tmp文件进行合并排序，导致多次I&#x2F;O，要提高sort_buffer_size</p>
</li>
<li><p>提高sort_buffer_size</p>
</li>
<li><p>提高max_length_for_sort_data，越大越有可能采用单路排序，但也更有可能超出sort_buffer_size，影响为高磁盘I&#x2F;O活动和低处理器使用率</p>
</li>
</ul>
<p>where高于having，能用where不用having</p>
</li>
</ul>
<h2 id="慢查询日志"><a href="#慢查询日志" class="headerlink" title="慢查询日志"></a>慢查询日志</h2><p>默认不开启，开启有性能影响，仅在调参时使用</p>
<p>开启只对当前数据库生效，重启MySQL后会失效</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//查看是否开启</span><br><span class="line">SHOW VARIABLES LIKE &#x27;%slow_query_log%&#x27;;</span><br><span class="line">//开启</span><br><span class="line">set global slow_query_log=1;</span><br></pre></td></tr></table></figure>

<p>设置慢查询阈值（运行时间大于该阈值会被记录）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#x27;long_query_time%&#x27;; -- 单位为秒</span><br></pre></td></tr></table></figure>

<p>mysql日志分析（mysqldumpslow）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 得到返回记录集最多的10个SQL</span><br><span class="line">mysqldumpslow -s r -t 10 /var/lib/mysql/xxx.log | more</span><br><span class="line">-- 得到访问次数最多的10个SQL</span><br><span class="line">mysqldumpslow -s c -t 10 /var/lib/mysql/xxx.log | more</span><br><span class="line">-- 得到按照时间排序的前10条里面含有左连接的查询语句</span><br><span class="line"> mysqldumpslow -s t -t 10 -g &quot;left join&quot; /var/lib/mysql/xxx.log | more</span><br></pre></td></tr></table></figure>

<h2 id="全局日志"><a href="#全局日志" class="headerlink" title="全局日志"></a>全局日志</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set global general_log=1;</span><br><span class="line">set global log_output=&#x27;TABLE&#x27;;</span><br><span class="line">select * from mysql.general_</span><br></pre></td></tr></table></figure>

<h2 id="语句操作顺序"><a href="#语句操作顺序" class="headerlink" title="语句操作顺序"></a>语句操作顺序</h2><blockquote>
<p>手写</p>
</blockquote>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210420121053777.png" alt="image-20210420121053777"></p>
<blockquote>
<p>机读</p>
</blockquote>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210420121125443.png" alt="image-20210420121125443"></p>
<h2 id="七种JOIN"><a href="#七种JOIN" class="headerlink" title="七种JOIN"></a>七种JOIN</h2><p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210420121822785.png" alt="image-20210420121822785"></p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210420122153491.png" alt="image-20210420122153491"></p>
<h2 id="MySQL锁机制"><a href="#MySQL锁机制" class="headerlink" title="MySQL锁机制"></a>MySQL锁机制</h2><p>从对数据操作的类型分：</p>
<ul>
<li>读锁（共享锁），加读锁后，本进程只能读被锁表，且不可写，其它进程可读该表，但是写的话会阻塞。</li>
<li>写锁（排他锁），加写锁后，本进程只可读可写被锁表，其他表对该表不可操作</li>
</ul>
<p>读锁阻塞写但不阻塞读，而写锁会把读和写都阻塞</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 手动增加表锁</span><br><span class="line">lock table 表名read(write),表名read(wirte)，其它;</span><br><span class="line">-- 查看表上加过的锁</span><br><span class="line">show open tables;</span><br><span class="line">-- 解锁表</span><br><span class="line">unlock tables;</span><br><span class="line">-- 分析表锁定</span><br><span class="line">show status like &#x27;table%&#x27;;</span><br></pre></td></tr></table></figure>

<p>Table_locks_immediate：产生表级锁定的次数，表示可以立即获取锁的查询次数</p>
<p>Table_locks_waited：出现表级锁定争用而发生等待的次数（不能立即获取锁的次数）</p>
<h3 id="并发事务处理问题"><a href="#并发事务处理问题" class="headerlink" title="并发事务处理问题"></a>并发事务处理问题</h3><ul>
<li>更新丢失（Lost Update）</li>
<li>脏读（Dirty Reads）</li>
<li>不可重复读（Non-Repeatable Reads）</li>
<li>幻读（Phantom Reads）</li>
</ul>
<h3 id="数据库的事务隔离级别"><a href="#数据库的事务隔离级别" class="headerlink" title="数据库的事务隔离级别"></a>数据库的事务隔离级别</h3><p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210518122244917.png" alt="image-20210518122244917"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查看当前数据库的事务隔离级别</span><br><span class="line">show variables like &#x27;tx_isolation&#x27;;</span><br><span class="line">-- 设置数据库事务隔离级别</span><br><span class="line">set transaction isolation level read committed;</span><br></pre></td></tr></table></figure>

<h3 id="行锁"><a href="#行锁" class="headerlink" title="行锁"></a>行锁</h3><p>索引失效，行锁会变表锁</p>
<h3 id="间隙锁"><a href="#间隙锁" class="headerlink" title="间隙锁"></a>间隙锁</h3><blockquote>
<p>概念</p>
</blockquote>
<p>使用范围条件而不是相等条件检索数据，并请求共享或排他锁时，InnoDB会给符合条件的已有数据记录的索引项加锁；对于键值在条件范围内但并不存在的记录，叫做“间隙（GAP）”，</p>
<p>InnoDB也会对这个“间隙”加锁，这种锁机制就是所谓的间隙锁（Next-Key锁）</p>
<blockquote>
<p>危害</p>
</blockquote>
<p>因为Query执行过程中通过范围查找的话，会锁定整个范围内所有的索引键值，即使这个键值并不存在。</p>
<p>间隙锁有一个比较致命的弱点，就是当锁定一个范围键值后，即使某些不存在的键值也会被无辜的锁定，而造成在锁定的时候无法插入锁定键值范围内的任何数据。在某些场景下这可能会对性能造成很大的危害。</p>
<h3 id="如何锁定一行"><a href="#如何锁定一行" class="headerlink" title="如何锁定一行"></a>如何锁定一行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 锁定该行，用for update</span><br><span class="line">select * from table where a=8 for update;</span><br></pre></td></tr></table></figure>

<h3 id="分析行锁定"><a href="#分析行锁定" class="headerlink" title="分析行锁定"></a>分析行锁定</h3><p>通过检查InnoDB_row_lock状态变量来分析系统上的行锁的争夺情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show status like &#x27;innodb_row_lock%&#x27;;</span><br></pre></td></tr></table></figure>

<ul>
<li>Innodb_row_lock_current_waits：当前正在等待锁定的数量</li>
<li>Innodb_row_lock_time：从系统启动到现在锁定总时间长度*</li>
<li>Innodb_row_lock_time_avg：每次等待所花平均时间*</li>
<li>Innodb_row_lock_time_max：从系统启动到现在等待最长的一次所花的时间</li>
<li>Innodb_row_lock_waits：系统启动后到现在总共等待的次数*</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/Win10%E4%B8%8B%EF%BC%8CpyTorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%BF%83%E5%BE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/Win10%E4%B8%8B%EF%BC%8CpyTorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%BF%83%E5%BE%97/" class="post-title-link" itemprop="url">Win10下，pyTorch深度学习环境搭建心得</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-12-21 16:13:27" itemprop="dateModified" datetime="2021-12-21T16:13:27+08:00">2021-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Win10下，pyTorch深度学习环境搭建心得"><a href="#Win10下，pyTorch深度学习环境搭建心得" class="headerlink" title="Win10下，pyTorch深度学习环境搭建心得"></a>Win10下，pyTorch深度学习环境搭建心得</h1><p>搭建windows下python深度学习基础环境</p>
<p>目前共需要三个基础的需要安装的工具</p>
<p>1.Anaconda 2.pyTorch 3.Cuda+Cudnn</p>
<p>接下来介绍从零开始配置环境</p>
<h2 id="1-Anaconda的安装"><a href="#1-Anaconda的安装" class="headerlink" title="1. Anaconda的安装"></a>1. Anaconda的安装</h2><p>​        我的电脑上已经先安装过了python3.7，一开始我并不想安装anaconda，本意尽量从简，但是pip并没有想象中好用，并不能快速安装我需要的包，所以选择使用conda。对于conda，有两个选择，一个是Anaconda，一个是Miniconda。后者是前者的精简版，只有conda的包管理功能，没有主界面等，简单说就是让你可以在命令行用conda的指令，对我来说足够了，所以我选择安装miniconda。</p>
<blockquote>
<p><strong>下载地址</strong></p>
</blockquote>
<p>官方网站：<a target="_blank" rel="noopener" href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a></p>
<p>清华镜像：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</a></p>
<hr>
<p>​        下载好之后进行安装，可以一路默认直到<code>Advanced Options</code>，这里建议不要勾选<code>Add Anaconda to my PATH environment variable</code>，勾选<code>Register Anaconda as my default Python</code>，因为Anaconda的python是在虚拟环境中使用的，如果勾选第一项会导致你在cmd中输入python会有警告，然后继续安装即可</p>
<p>安装好后在环境变量中添加三个路径，已经有的话就不用了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator\Miniconda3； </span><br><span class="line">C:\Users\Administrator\Miniconda3\Scripts； </span><br><span class="line">C:\Users\Administrator\Miniconda3\Library\bin </span><br></pre></td></tr></table></figure>

<p>至此，conda算是安装好了，接下来就可以利用conda来安装其他你需要的包了</p>
<h2 id="2-pyTorch的安装"><a href="#2-pyTorch的安装" class="headerlink" title="2. pyTorch的安装"></a>2. pyTorch的安装</h2><p>​        首先到官方网站<a target="_blank" rel="noopener" href="https://pytorch.org/">https://pytorch.org/</a>，得到关于你的配置下的pyTorch安装指令，比如我的是<code>windows10+conda+python+Cuda10.1</code>，就得到了这样的指令<code>conda install pytorch torchvision cudatoolkit=10.1 -c pytorch</code>，注意讲后面的-c python去掉（我也不懂，去掉就是了），接着最保险的安装方法是打开Anaconda Prompt操作台，类似于cmd（已经安装了miniconda，所以会有这个程序）</p>
<ul>
<li>对于国内用户推荐，首先给Anaconda添加清华镜像</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</span><br><span class="line">conda config --set show_channel_urls yes</span><br></pre></td></tr></table></figure>

<ul>
<li>接下来执行之前得到的指令来安装pyTorch即可</li>
</ul>
<hr>
<p>​        安装完成后可以关闭，打开cmd，创建一个带有pytorch包的虚拟环境，指令如下<code>conda create -n your_envname python=3.7 pytorch</code>，创建完成后，使用<code>conda activate your_envname</code>来打开该虚拟环境，然后输入python，打开python，接着输入<code>import torch</code>来查看pyTorch是否安装成功并可以使用，至此，pytorch的安装告一段落。其他包的安装可以借鉴此过程</p>
<ul>
<li>其实也可以先创建环境，再在该环境下安装pyTorch包，效果是一样的</li>
</ul>
<h2 id="Cuda-Cudnn的安装"><a href="#Cuda-Cudnn的安装" class="headerlink" title="Cuda+Cudnn的安装"></a>Cuda+Cudnn的安装</h2><p>​        先下载Cuda，到官网下载<a target="_blank" rel="noopener" href="https://developer.nvidia.com/">https://developer.nvidia.com/</a>，根据配置选择相应版本下载。安装直接一路默认即可</p>
<hr>
<p>​        再下载Cudnn，<a target="_blank" rel="noopener" href="https://developer.nvidia.com/rdp/cudnn-download">https://developer.nvidia.com/rdp/cudnn-download</a>，需要注册一个Nivida账号，选择相应版本下载 </p>
<ol>
<li><p>下载完成后得到一个压缩包，将其解压，找到文件夹’cuda’打开，你会发现三个文件夹’bin’、’include’、’lib’</p>
</li>
<li><p>打开CUDA安装路径<br><code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA </code><br>发现有同名的三个文件夹’bin’、’include’、’lib’</p>
</li>
<li><p>将第一步中’bin’中的文件复制到第二步中’bin’文件夹下<br>将第一步中’include’中的文件复制到第二步中’include’文件夹下<br>将第一步中’lib’文件夹下’x64’文件夹中的文件复制到第二步中’lib’文件夹下’x64’文件夹中</p>
</li>
<li><p>接着添加path环境变量：<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.0\lib\x64</code></p>
</li>
</ol>
<p>至此，安装完成，在cmd中输入nvcc -V查看是否安装完成</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/SSM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/SSM/" class="post-title-link" itemprop="url">SSM</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-12-21 16:19:30" itemprop="dateModified" datetime="2021-12-21T16:19:30+08:00">2021-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>7.5k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>7 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="SSM"><a href="#SSM" class="headerlink" title="SSM"></a>SSM</h1><h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Spring是一个IOC(DI)和AOP容器框架。</p>
<p>可以管理所有的组件（类）</p>
<h3 id="IOC和AOP"><a href="#IOC和AOP" class="headerlink" title="IOC和AOP"></a>IOC和AOP</h3><blockquote>
<p>IOC控制反转（容器）</p>
</blockquote>
<p>反转：将主动创建变为被动获取</p>
<blockquote>
<p>DI依赖注入</p>
</blockquote>
<p>容器能知道某个类运行时需要另外哪个类，通过反射的形式，将容器中准备好的对象注入该类（利用反射给属性赋值）</p>
<h4 id="bean"><a href="#bean" class="headerlink" title="bean"></a>bean</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 无参创建对象（默认）--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        一个Bean标签可以注册一个组件（对象、类）</span></span><br><span class="line"><span class="comment">  			class要写注册的组件的全类名，</span></span><br><span class="line"><span class="comment">    		id是该对象的唯一标识</span></span><br><span class="line"><span class="comment">    		name是别名，可以同时取多个,以逗号或分号分隔</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.spring.person&quot;</span> <span class="attr">name</span>=<span class="string">&quot;li;zhang;wang&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        使用property为Person对象的属性赋值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;23&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;bni@bni.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!-- 有参创建对象的三种方式--&gt;</span></span><br><span class="line">1.下标赋值</span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三&quot;</span>&gt;</span></span><br><span class="line">2.类型</span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三&quot;</span>&gt;</span></span><br><span class="line">3.参数名</span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="spring配置"><a href="#spring配置" class="headerlink" title="spring配置"></a>spring配置</h4><p>1.别名alias</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    如果添加了别名，也可以使用别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;person&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;li&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">alias</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.import</p>
<p>一般团队开发，可以导入其他的xml配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;beans2.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="bean的作用域"><a href="#bean的作用域" class="headerlink" title="bean的作用域"></a>bean的作用域</h4><p>1.单例模式（singleton）</p>
<p>全局只有一个对象</p>
<p>2.原型模式（prototype）</p>
<p>每次获取都是新的对象</p>
<h4 id="bean自动装配"><a href="#bean自动装配" class="headerlink" title="bean自动装配"></a>bean自动装配</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    byName会自动装配和set方法后的值相同的id的对象--&gt;</span><br><span class="line">&lt;!--    byType会自动装配和set的类型相同的对象--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;com.demo.spring.Person&quot;</span> autowire=<span class="string">&quot;byName&quot;</span>&gt;</span><br><span class="line">        </span><br><span class="line">&lt;!-- 使用注解自动装配，需要导入约束配置支持--&gt;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">    xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">    xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">    xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:annotation-config/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h4 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h4><blockquote>
<p>@Component</p>
</blockquote>
<p>类上加@Component相当于<bean id="person" class="com.demo.spring.person"></p>
<blockquote>
<p>衍生注解</p>
</blockquote>
<ul>
<li>dao [@Repository]</li>
<li>service [@Service]</li>
<li>controller [@controller]</li>
</ul>
<h4 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h4><blockquote>
<p>静态代理</p>
</blockquote>
<p>类似中介</p>
<blockquote>
<p>动态代理</p>
</blockquote>
<p>利用反射</p>
<ul>
<li>一个动态代理类代理的是一个接口，一般就是对应的一类业务</li>
<li>一个动态代理类可以代理多个类，只要实现了同一个接口即可</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(), target.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTarget</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行了&quot;</span> + msg + <span class="string">&quot;方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Spring代理"><a href="#Spring代理" class="headerlink" title="Spring代理"></a>Spring代理</h4><h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><p>1.配置mybatis-config.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1254503008&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.写配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//工具类sqlSessionFactory --&gt; sqlSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="万能map"><a href="#万能map" class="headerlink" title="万能map"></a>万能map</h3><p>假设实体类或库表中字段或参数过多，应当考虑使用map</p>
<h3 id="mybatis配置"><a href="#mybatis配置" class="headerlink" title="mybatis配置"></a>mybatis配置</h3><ul>
<li>configuration（配置）<ul>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#properties">properties（属性）</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#settings">settings（设置）</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#typeAliases">typeAliases（类型别名）</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlers（类型处理器）</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactory（对象工厂）</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#plugins">plugins（插件）</a></li>
<li>environments（环境配置）<ul>
<li>environment（环境变量）<ul>
<li>transactionManager（事务管理器）</li>
<li>dataSource（数据源）</li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#databaseIdProvider">databaseIdProvider（数据库厂商标识）</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#mappers">mappers（映射器）</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>typeAliases</p>
</blockquote>
<p>可以给类起别名，也可以直接扫描一个包，其下所有类默认为小写名称、</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.demo.pojo.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.demo.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>生命周期和作用域</p>
</blockquote>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210807111225663.png" alt="image-20210807111225663"></p>
<h3 id="LOMBOK插件"><a href="#LOMBOK插件" class="headerlink" title="LOMBOK插件"></a>LOMBOK插件</h3><p>自动编写getter，setter等，无需手动赋值</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210809155458897.png" alt="image-20210809155458897"></p>
<h1 id="springMVC"><a href="#springMVC" class="headerlink" title="springMVC"></a>springMVC</h1><p>spingmvc框架以请求为驱动，围绕一个中心Servlet分派请求及提供其他功能。</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210828233325754.png" alt="image-20210828233325754"></p>
<p>使用DispatcherServlet来进行调度管理。</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210827165707752.png" alt="image-20210827165707752"></p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210827165750515.png" alt="image-20210827165750515"></p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210827165755615.png" alt="image-20210827165755615"></p>
<p>创建springmvc项目步骤</p>
<ol>
<li>新建一个web项目</li>
<li>导入相关jar包</li>
<li>编写web.xml，注册DispatcherServlet</li>
<li>编写springmvc配置文件</li>
<li>接下来创建对应的控制类，controller</li>
<li>最后完善前端视图和controller之间的对应</li>
<li>测试运行调试</li>
</ol>
<p>springmvc必须配置三大件：</p>
<p><strong>处理器映射器，处理器适配器，视图解析器</strong></p>
<p>只需要手动配置视图解析器，而处理器映射器和处理器适配器只需要开启注解驱动即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context-4.2.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    自动扫描包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.demo.controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    自动过滤静态资源，去除.mp4等处理不了的资源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--支持mvc注解驱动</span></span><br><span class="line"><span class="comment">        在spring中一般采用@RequestMapping注解来完成映射关系</span></span><br><span class="line"><span class="comment">        要想使用@RequestMapping注解生效</span></span><br><span class="line"><span class="comment">        必须向上下文中注册DefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">        和一个AnnotationMethodHanlerAdapter实例</span></span><br><span class="line"><span class="comment">        这两个实例分别在类级别和方法级别处理，</span></span><br><span class="line"><span class="comment">        而annotation-driven配置帮助我们自动完成上述两个实例的注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--视图解析器 : 模板引擎 Thymeleaf Freemarker等--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="springboot"><a href="#springboot" class="headerlink" title="springboot"></a>springboot</h1><h2 id="注解-1"><a href="#注解-1" class="headerlink" title="注解"></a>注解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.gacl.annotation;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这是一个自定义的注解(Annotation)类 在定义注解(Annotation)类时使用了另一个注解类Retention</span></span><br><span class="line"><span class="comment"> * 在注解类上使用另一个注解类，那么被使用的注解类就称为元注解</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target( &#123; ElementType.METHOD, ElementType.TYPE &#125;)</span></span><br><span class="line"><span class="comment">//Target注解决定MyAnnotation注解可以加在哪些成分上，如加在类身上，或者属性身上，或者方法身上等成分</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment">//Retention注解决定MyAnnotation注解的生命周期</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Retention(RetentionPolicy.SOURCE)</span></span><br><span class="line"><span class="comment"> * 这个注解的意思是让MyAnnotation注解只在java源文件中存在，编译成.class文件后注解就不存在了</span></span><br><span class="line"><span class="comment"> * @Retention(RetentionPolicy.CLASS)</span></span><br><span class="line"><span class="comment"> * 这个注解的意思是让MyAnnotation注解在java源文件(.java文件)中存在，编译成.class文件后注解也还存在，</span></span><br><span class="line"><span class="comment"> * 被MyAnnotation注解类标识的类被类加载器加载到内存中后MyAnnotation注解就不存在了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 这里是在注解类MyAnnotation上使用另一个注解类，这里的Retention称为元注解。</span></span><br><span class="line"><span class="comment"> * Retention注解括号中的&quot;RetentionPolicy.RUNTIME&quot;意思是让MyAnnotation这个注解的生命周期一直程序运行时都存在</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Documented</span> </span><br><span class="line"><span class="comment">//注解表明这个注解应该被 javadoc工具记录</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="comment">//表名该注解所在的类若为父类则可以被子类继承该父类的注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Deprecated</span>:若某类或某方法加上该注解之后，表示此方法或类不再建议使用，调用时也会出现删除线，但并不代表不能用，只是说，不推荐使用，因为还有更好的方法可以调用。</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/Springboot%20%E9%9B%86%E6%88%90Dubbo2.7.8%E7%A4%BA%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/Springboot%20%E9%9B%86%E6%88%90Dubbo2.7.8%E7%A4%BA%E4%BE%8B/" class="post-title-link" itemprop="url">Springboot集成Dubbo2.7.8</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-04-25 21:15:18" itemprop="dateModified" datetime="2022-04-25T21:15:18+08:00">2022-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Springboot-集成Dubbo2-7-8示例"><a href="#Springboot-集成Dubbo2-7-8示例" class="headerlink" title="Springboot 集成Dubbo2.7.8示例"></a>Springboot 集成Dubbo2.7.8示例</h1><h2 id="consumer-amp-provider"><a href="#consumer-amp-provider" class="headerlink" title="consumer&amp;provider"></a>consumer&amp;provider</h2><h3 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h3><p>新建springboot项目后，引入以下额外依赖，Dubbo的consumer和provider的依赖相同</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.101tec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-recipes<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="provider"><a href="#provider" class="headerlink" title="provider"></a>provider</h3><p>建立子工程provider来作为生产者</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210913215341110.png" alt="image-20210913215341110"></p>
<p>其中application.properties:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br><span class="line"><span class="comment"># 服务应用名字</span></span><br><span class="line"><span class="attr">dubbo.application.name</span>=<span class="string">provider-server</span></span><br><span class="line"><span class="comment"># 注册中心地址</span></span><br><span class="line"><span class="attr">dubbo.registry.protocol</span>=<span class="string">zookeeper</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://localhost:2181</span></span><br><span class="line"><span class="comment"># 哪些服务要被注册</span></span><br><span class="line"><span class="attr">dubbo.scan.base-packages</span>=<span class="string">com.example.provider.service</span></span><br><span class="line"><span class="comment"># 协议</span></span><br><span class="line"><span class="comment">#dubbo.protocol.host=192.168.0.1</span></span><br><span class="line"><span class="attr">spring.main.allow-bean-definition-overriding</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">dubbo.protocol.name</span>=<span class="string">dubbo</span></span><br><span class="line"><span class="attr">dubbo.protocol.port</span>=<span class="string">20880</span></span><br></pre></td></tr></table></figure>

<p>TicketServiceImpl:</p>
<p>版本号一定要填写！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.provider.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.dubbo.config.annotation.DubboService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@DubboService(version = &quot;1.0&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TicketServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TicketService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTicket</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TicketService：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.provider.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TicketService</span> &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">getTicket</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="consumer"><a href="#consumer" class="headerlink" title="consumer"></a>consumer</h3><p>引入provider的接口，注意接口包路径一定要一致</p>
<p>目录：</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20210913215745601.png" alt="image-20210913215745601"></p>
<p>application.properties:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8083</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 消费者也要暴露自己的名字</span></span><br><span class="line"><span class="attr">dubbo.application.name</span>=<span class="string">consumer-server</span></span><br><span class="line"><span class="comment"># 注册中心的地址</span></span><br><span class="line"><span class="attr">dubbo.registry.protocol</span>=<span class="string">zookeeper</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://localhost:2181</span></span><br><span class="line"><span class="attr">dubbo.scan.base-packages</span>=<span class="string">com.example.consumer.service</span></span><br><span class="line"><span class="comment"># 协议</span></span><br><span class="line"><span class="attr">spring.main.allow-bean-definition-overriding</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">dubbo.protocol.name</span>=<span class="string">dubbo</span></span><br><span class="line"><span class="attr">dubbo.protocol.port</span>=<span class="string">20881</span></span><br></pre></td></tr></table></figure>

<p>UserServiceImol:</p>
<p>@DubboService注解会让这个服务变成provider，而@DubboReference则让服务变成consumer，同时加的时候该服务既是provider又是consumer，版本号都要加，否则会报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.consumer.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.provider.service.TicketService;</span><br><span class="line"><span class="keyword">import</span> org.apache.dubbo.config.annotation.DubboReference;</span><br><span class="line"><span class="keyword">import</span> org.apache.dubbo.config.annotation.DubboService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@DubboService(version = &quot;1.0&quot;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserServicei</span>&#123;</span><br><span class="line">    <span class="comment">//想拿到provider-server提供的票，要去注册中心拿到服务</span></span><br><span class="line">    <span class="meta">@DubboReference(version = &quot;1.0&quot;)</span> </span><br><span class="line">    TicketService ticketService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyTicket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ticket</span> <span class="operator">=</span> ticketService.getTicket(<span class="string">&quot;我&quot;</span>);</span><br><span class="line">        System.out.println(ticket);</span><br><span class="line">        System.out.println(<span class="string">&quot;shit&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UerServicei：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.consumer.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserServicei</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyTicket</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><h3 id="注册中心zookeeper"><a href="#注册中心zookeeper" class="headerlink" title="注册中心zookeeper"></a>注册中心zookeeper</h3><p>完成整个rpc框架调用还需要注册中心，这里使用zookeeper，并加上dubbo的监控中心来可视化监控服务</p>
<p>下载apache-zookeeper-3.7.0-bin</p>
<p>运行bin文件夹中的zkServer.cmd启动zookeeper</p>
<h3 id="监控中心dubbo-admin"><a href="#监控中心dubbo-admin" class="headerlink" title="监控中心dubbo-admin"></a>监控中心dubbo-admin</h3><p>下载dubbo-admin</p>
<p>为前后端分离项目</p>
<p>启动其中的dubbo-admin-ui，这里使用vscode打开，在终端输入npm run dev</p>
<p>启动其中的dubbo-admin-server，这里用idea打开，直接运行即可</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/java%E6%97%A5%E5%BF%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/java%E6%97%A5%E5%BF%97/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-07-27 14:45:08" itemprop="dateModified" datetime="2021-07-27T14:45:08+08:00">2021-07-27</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>384</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="java日志"><a href="#java日志" class="headerlink" title="java日志"></a>java日志</h1><p>日志框架技术：JUL、Logback、Log4j、Log4j2</p>
<p>日志门面技术：JCL、SLF4j</p>
<p>每一种日志框架都有自己单独的API，要使用对应的框架就要使用对应的API</p>
<p>使用日志门面技术可以屏蔽日志框架技术的不同，可在项目中随意改动日志框架 </p>
<h2 id="JUL"><a href="#JUL" class="headerlink" title="JUL"></a>JUL</h2><p>java.util.logging </p>
<p>Java原生日志框架</p>
<h2 id="Log4j"><a href="#Log4j" class="headerlink" title="Log4j"></a>Log4j</h2><p>Apache的一个开源项目</p>
<h2 id="Logback"><a href="#Logback" class="headerlink" title="Logback"></a>Logback</h2><p>由Log4j之父做的另一个开源项目</p>
<p>业界乘坐log4j的后浪，一个可靠、通用且灵活的java日志框架</p>
<h2 id="Log4j2"><a href="#Log4j2" class="headerlink" title="Log4j2"></a>Log4j2</h2><p>Log4j官方的第二个版本，各方面与Logback相似</p>
<p>具有插件式结构、配置文件优化等特征</p>
<p>Spring Boot1.4版本后不再支持log4j</p>
<h2 id="日志门面技术"><a href="#日志门面技术" class="headerlink" title="日志门面技术"></a>日志门面技术</h2><p>可以屏蔽日志框架的不同，只要日志门面做的好，随意换另外一个日志框架，应用程序不需要修改任意一行代码就可以直接上线</p>
<h3 id="SLF4J"><a href="#SLF4J" class="headerlink" title="SLF4J"></a>SLF4J</h3><p>中间使用桥接器和日志框架桥接</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/Java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/Java/" class="post-title-link" itemprop="url">Java</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-04-01 11:02:36" itemprop="dateModified" datetime="2021-04-01T11:02:36+08:00">2021-04-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>11 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h1><table>
<thead>
<tr>
<th>快捷键</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>Alt+Enter</code></td>
<td>导入包、自动修正代码、接口自动载入</td>
</tr>
<tr>
<td><code>Ctrl+Y</code></td>
<td>删除光标所在行</td>
</tr>
<tr>
<td><code>Ctrl+D</code></td>
<td>复制光标所在行内容，插入光标位置下面</td>
</tr>
<tr>
<td><code>Ctrl+Alt+L</code></td>
<td>格式化代码</td>
</tr>
<tr>
<td><code>Ctrl+Shift+/</code></td>
<td>选中代码注释，多行注释，再按取消注释</td>
</tr>
<tr>
<td><code>Ctrl+n</code></td>
<td>搜索包</td>
</tr>
<tr>
<td><code>Alt+Ins</code></td>
<td>自动生成代码，toString,get,set等方法</td>
</tr>
<tr>
<td><code>Alt+Shift+上下箭头</code></td>
<td>移动当前代码行</td>
</tr>
<tr>
<td><code>ctrl+f12</code></td>
<td>在类中搜索方法或常量</td>
</tr>
<tr>
<td><code>alt + shift + e</code></td>
<td>批量修改名称</td>
</tr>
<tr>
<td><code>alt+6</code></td>
<td>查找TODO注释</td>
</tr>
</tbody></table>
<p>idea中，默认当前路径是project的根目录</p>
<table>
<thead>
<tr>
<th>Java速写缩略语</th>
<th>代码</th>
</tr>
</thead>
<tbody><tr>
<td>psvm</td>
<td>public static void main(String[] args){}</td>
</tr>
<tr>
<td>sout</td>
<td>System.out()</td>
</tr>
<tr>
<td>array.fori</td>
<td>数组正序遍历</td>
</tr>
<tr>
<td>array.forr</td>
<td>数组倒序遍历</td>
</tr>
</tbody></table>
<h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h2 id="数据类型四类八种"><a href="#数据类型四类八种" class="headerlink" title="数据类型四类八种"></a>数据类型四类八种</h2><table>
<thead>
<tr>
<th>整形</th>
<th><strong>byte(1)、short(2)、int(4) 、long(8)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>浮点型</strong></td>
<td><strong>float(4)、double(8)</strong></td>
</tr>
<tr>
<td><strong>字符型</strong></td>
<td><strong>char(2)</strong></td>
</tr>
<tr>
<td><strong>布尔型</strong></td>
<td><strong>boolean(1)</strong></td>
</tr>
</tbody></table>
<p>整数可以表示为：123_221_333类似于书面中的逗号123,221,333</p>
<table>
<thead>
<tr>
<th>基本类型</th>
<th>包装类</th>
</tr>
</thead>
<tbody><tr>
<td>byte</td>
<td>Byte</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
</tr>
<tr>
<td>int</td>
<td>Integer</td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
</tr>
<tr>
<td>char</td>
<td>Character</td>
</tr>
<tr>
<td>boolean</td>
<td>Boolean</td>
</tr>
</tbody></table>
<p>包装类都在java.lang包下</p>
<h2 id="编译器的两种优化"><a href="#编译器的两种优化" class="headerlink" title="编译器的两种优化"></a>编译器的两种优化</h2><ul>
<li>变量的常量优化</li>
<li>对于byte&#x2F;short&#x2F;char三种类型，若右侧数值未超范围，则自动补上(byte&#x2F;short&#x2F;char)，即强制转移</li>
</ul>
<h2 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h2><ol>
<li><p>多个case后面的数值不可以重复</p>
</li>
<li><p>switch后面小括号中只能是下列数据类型</p>
<p>基本数据类型：byte&#x2F;short&#x2F;char&#x2F;int</p>
<p>引用数据类型：String字符串、enum枚举</p>
</li>
</ol>
<h2 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h2><ol>
<li>参数个数不同</li>
<li>参数类型不同</li>
<li>参数的多类型顺序不同</li>
</ol>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>格式：数据类型[] 数组名称 &#x3D; new 数据类型[数组长度]{元素1、元素2…}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//静态初始化</span></span><br><span class="line"><span class="type">int</span>[] arrayA = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">300</span>]&#123;element1、element2、...&#125;;</span><br><span class="line"><span class="type">int</span>[] arrayB = &#123;element1、element2、...&#125;;</span><br><span class="line"><span class="comment">//动态初始化</span></span><br><span class="line"><span class="type">int</span>[] arrayA = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">300</span>];</span><br></pre></td></tr></table></figure>

<p>初始化数组有两种格式：标准格式&#x2F;省略格式</p>
<p>一维数组的输出：System.out.println(Arrays.toString(array))</p>
<p>多维数组的输出：System.out.println(Arrays.deepToString(array))</p>
<p>建立空数组时，数组内的数据会有默认值。</p>
<ul>
<li>整数类型，默认为0</li>
<li>浮点类型，默认为0.0</li>
<li>字符类型，默认为”\u0000”</li>
<li>引用类型，默认为null</li>
</ul>
<hr>
<blockquote>
<p>一个数组的内存图</p>
</blockquote>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20200803212355839.png" alt="image-20200803212355839"></p>
<hr>
<p>数组一旦创建，长度不可再改变</p>
<blockquote>
<p>数组方法</p>
</blockquote>
<p><code>array.length</code>：得到数组长度</p>
<p><code>array.fori</code>：快捷生成数组遍历</p>
<blockquote>
<p>数组调用</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArray</span><span class="params">(<span class="type">int</span>[] array)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>对象数组</p>
</blockquote>
<p>类名[] array &#x3D; new 类名[length]</p>
<h3 id="Arrays类工具"><a href="#Arrays类工具" class="headerlink" title="Arrays类工具"></a>Arrays类工具</h3><p><code>java.util.Arrays</code>是一个与数组相关的工具类，里面提供了大量静态方法，用来实现数组常见的操作。</p>
<p><code>public static string tostring(数组)</code>：将参数数组变成字符串（按照默认格式：[元素1，元素2，元素3…]）<br><code>public static void sort(数组)</code>：按照默认升序（从小到大）对数组的元素进行排序。</p>
<ol>
<li>如果是数值，sort默认按照升序从小到大</li>
<li>如果是字符串，sort默认按照字母升序</li>
<li>如果是自定义的类型，那么这个自定义的类需要有Comparable或者Comparator接口的支持。</li>
</ol>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ul>
<li>字符串的内容并不能被改变</li>
<li>String str所创建的str中存放的是字符串的地址值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字符串和数字相加的类型转换</span></span><br><span class="line"><span class="type">String</span> <span class="variable">x</span> <span class="operator">=</span> <span class="string">&quot;1.1&quot;</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">y</span> <span class="operator">=</span> Double.parseDouble(x) + <span class="number">2</span> </span><br><span class="line"><span class="comment">//字符串的创建(3+1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[]args)</span>&#123;</span><br><span class="line">    <span class="comment">//使用空参构造</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">strl</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">String</span>()；<span class="comment">//小括号留空，说明字符串什么内容都没有。</span></span><br><span class="line">    System.out.println(“第<span class="number">1</span>个字符串：“+str1);</span><br><span class="line">    <span class="comment">//根据字符数组创建字符串</span></span><br><span class="line">    <span class="type">char</span>[] charArray=&#123;<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>&#125;;</span><br><span class="line">    String str2=<span class="keyword">new</span> <span class="title class_">String</span>（charArray）;</span><br><span class="line">    System.out.println(“第<span class="number">2</span>个字符串：“+str2);</span><br><span class="line">    <span class="comment">//根据字节数组创建字符串</span></span><br><span class="line">    <span class="type">byte</span>[]byteArray=&#123;<span class="number">97</span>，<span class="number">98</span>，<span class="number">99</span>&#125;;</span><br><span class="line">    String str3=<span class="keyword">new</span> <span class="title class_">String</span>（byteArray）;</span><br><span class="line">    System.out.println(“第<span class="number">3</span>个字符串：“+str3);</span><br><span class="line">    <span class="comment">//直接创建</span></span><br><span class="line">    String str4=<span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    system.out.printin(“第<span class="number">4</span>个字符串：“+str4);</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>字符串的内存调用</p>
</blockquote>
<ol>
<li>对于引用类型来说，&#x3D;&#x3D;进行的是地址值的比较</li>
<li>双引号直接写的字符串在常量池当中，new的不在池当中</li>
</ol>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20200809190009177.png" alt="image-20200809190009177"></p>
<blockquote>
<p>方法</p>
</blockquote>
<p><code>String.equals(str)</code>：对比两个字符串内容是否相等，推荐将常量写在前面</p>
<p><code>String.equalsIgnoreCase(str)</code>：忽略大小写进行比较</p>
<p><code>public int Length()</code>：获取字符串当中含有的字符个数，拿到字符串长度。</p>
<p><code>public String concat(String str)</code>：将当前字符串和参数字符串拼接成为返回值新的字符串。</p>
<p><code>public char charAt(int index)</code>：获取指定索引位置的单个字符。</p>
<p><code>public int indexof(String str)</code>：查找参数字符串在本字符串当中首次出现的索引位置，如果没有返回-1值。</p>
<p><code>public String substring(int index)</code>：截取从参数位置一直到字符串末尾，返回新字符串。</p>
<p><code>public String substring(int begin，int end)</code>：截取从begin开始，一直到end结束，中间的字符串。备注：[begin，end），包含左边，不包含右边。</p>
<p><code>public char[]tocharArray()</code>：将当前字符串拆分成为字符数组作为返回值。</p>
<p><code>public byte[]getBytes()</code>：获得当前字符串底层的字节数组。</p>
<p><code>public String replace(Charsequence oldString，Charsequence newstring)</code>：将所有出现的老字符串替换成为新的字符串，返回替换之后的结果新字符串。</p>
<p><code>public String[] split(String regex)</code>：按照参数的规则，将字符串切分成为若干部分。</p>
<p><u>注意事项</u>：split方法的参数其实是一个正则表达式”，今后学习。今天要注意：如果按照英文句点“.”进行切分，必须写”\\.”</p>
<h2 id="系统输入输出"><a href="#系统输入输出" class="headerlink" title="系统输入输出"></a>系统输入输出</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#系统输入</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">byte</span> <span class="variable">age</span> <span class="operator">=</span> scanner.nextByte();</span><br><span class="line">#系统输出</span><br><span class="line">System.out</span><br></pre></td></tr></table></figure>

<h2 id="类的定义"><a href="#类的定义" class="headerlink" title="类的定义"></a>类的定义</h2><p>一个标准的类通常要有下面四个组成部分</p>
<ol>
<li>所有的成员变量都要使用private关键字修饰</li>
<li>为每一个成员变量编写一对Getter&#x2F;Setter方法</li>
<li>编写一个无参数的构造方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> male;  <span class="comment">//定义private关键字</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//---------------------------------//</span></span><br><span class="line">    <span class="comment">//为private关键字定义getter/setter方法</span></span><br><span class="line">    <span class="comment">//对于boolean类型，其getter方法要用isXxx()</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMale</span><span class="params">(<span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">        male = b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">isMale</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> male;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//---------------------------------//</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">SetName</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        name = str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//---------------------------------//</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="comment">//抽象方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子类必须覆盖重写父类的抽象方法</p>
<p>关于抽象类的使用，以下为语法上要注意的细节，虽然条目较多，但若理解了抽象的本质，无需死记硬背。</p>
<ol>
<li>抽象类不能创建对象，如果创建，编译无法通过而报错。只能创建其非抽象子类的对象。</li>
</ol>
<blockquote>
<p>理解：假设创建了抽象类的对象，调用抽象的方法，而抽象方法没有具体的方法体，没有意义。</p>
</blockquote>
<ol start="2">
<li>抽象类中，可以有构造方法是供子类创建对象时，初始化父类成员使用的。</li>
</ol>
<blockquote>
<p>理解：子类的构造方法中，有默认的super()，需要访问父类构造方法。</p>
</blockquote>
<ol start="3">
<li>抽象类中，不一定包含抽象方法，但是有抽象方法的类必定是抽象类。</li>
</ol>
<blockquote>
<p>理解：未包含抽象方法的抽象类，目的就是不想让调用者创建该类对象，通常用于某些特殊的类结构设计。</p>
</blockquote>
<ol start="4">
<li>抽象类的子类，必须重写抽象父类中所有的抽象方法，否则，编译无法通过而报错。除非该子类也是抽象类。</li>
</ol>
<blockquote>
<p>理解：假设不重写所有抽象方法，则类中可能包含抽象方法。那么创建对象后，调用抽象的方法，没有意义。</p>
</blockquote>
<h3 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h3><p>定义在一个类内部的类</p>
<ol>
<li>成员内部类</li>
<li>局部内部类（包含匿名内部类）</li>
</ol>
<h4 id="成员内部类"><a href="#成员内部类" class="headerlink" title="成员内部类"></a>成员内部类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">成员内部类的定义格式：</span><br><span class="line">修饰符 class 外部类名称&#123;</span><br><span class="line">	修饰符 cLass 内部类名称&#123;</span><br><span class="line"><span class="comment">//…</span></span><br><span class="line">&#125;&#125;</span><br><span class="line">…</span><br></pre></td></tr></table></figure>

<p>注意：内用外，随意访问；外用内，需要内部类对象</p>
<blockquote>
<p>如何使用成员内部类？有两种方式：</p>
</blockquote>
<ol>
<li><p>间接方式：在外部类的方法当中，使用内部类；然后main只是调用外部类的方法。</p>
</li>
<li><p>直接方式，公式：<br>类名称 对象名 &#x3D; new 类名称()；</p>
</li>
</ol>
<p><code>【外部类名称.内部类名称 对象名 = new 外部类名称().new 内部类名称();】</code></p>
<blockquote>
<p>如果出现了重名现象，格式为：外部类.this.外部类成员变量名</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span>&#123;</span><br><span class="line">	<span class="type">int</span> num=<span class="number">10</span>；<span class="comment">//外部类的成员变量</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">		<span class="type">int</span> num=2e；<span class="comment">//内部类的成员变量</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodInner</span><span class="params">()</span>&#123;</span><br><span class="line">			<span class="type">int</span> num=<span class="number">30</span>；<span class="comment">//内部类方法的局部变量</span></span><br><span class="line">                System.out.print1n（num）；<span class="comment">//局部变量，就近原则</span></span><br><span class="line">                System.out.print1n（<span class="built_in">this</span>.num）；<span class="comment">//内部类的成员变量</span></span><br><span class="line">                System.out.print1n（Outer.<span class="built_in">this</span>.num）；<span class="comment">//外部类的成员变量</span></span><br><span class="line">        &#125;&#125;&#125;             </span><br></pre></td></tr></table></figure>

<h4 id="局部内部类"><a href="#局部内部类" class="headerlink" title="局部内部类"></a>局部内部类</h4><p>如果一个类是定义在一个方法内部的，那么这就是一个局部内部类。<br>“局部”：只有当前所属的方法才能使用它，出了这个方法外面就不能用了。</p>
<p>定义格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">修饰符 class 外部类名称&#123;</span><br><span class="line">    修饰符 返回值 类型 外部类方法名称(参数列表)&#123;</span><br><span class="line">        class局部内部类名称（</span><br><span class="line">			<span class="comment">//…</span></span><br><span class="line">&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>类的权限修饰符：</p>
</blockquote>
<p>public&gt;protected&gt;（default）&gt;private定义一个类的时候，权限修饰符规则：</p>
<ol>
<li><p>外部类：public&#x2F;（default）</p>
</li>
<li><p>成员内部类：public&#x2F;protected&#x2F;（default）&#x2F;private</p>
</li>
<li><p>局部内部类：什么都不能写</p>
</li>
</ol>
<blockquote>
<p>局部内部类，如果希望访间所在方法的局部变量，那么这个局部变量必须是【有效final的】。即只赋值一次</p>
</blockquote>
<p>备注：从Java 8+开始，只要局部变量事实不变，那么final关键字可以省略。<br>原因：</p>
<ol>
<li><p>new出来的对象在堆内存当中。</p>
</li>
<li><p>局部变量是跟着方法走的，在栈内存当中。</p>
</li>
<li><p>方法运行结束之后，立刻出栈，局部变量就会立刻消失。</p>
</li>
<li><p>但是new出来的对象会在堆当中持续存在，直到垃圾回收消失。所以需要不变的变量</p>
</li>
</ol>
<h4 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h4><p>如果接口的实现类（或者是父类的子类）只需要使用唯一的一次，那么这种情况下就可以省略掉该类的定义，而改为使用【匿名内部类】。</p>
<p>匿名内部类的定义格式：<br><code>接口名称 对象名 = new 接口名称()&#123;//覆盖重写所有抽象方法&#125;</code></p>
<p>对格式<code>new接口名称()&#123;...&#125;</code>进行解析：<br>1.new代表创建对象的动作</p>
<p>2.接口名称就是匿名内部类需要实现哪个接口</p>
<p>3.{.…}这才是匿名内部类的内容</p>
<p>另外还要注意几点问题：</p>
<ol>
<li><p>匿名内部类，在【创建对象】的时候，只能使用唯一一次。如果希望多次创建对象，而且类的内容一样的话，那么就必须使用单独定义的实现类了。</p>
</li>
<li><p>匿名对象，在【调用方法】的时候，只能调用唯一一次。如果希望同一个对象，调用次方法，那么必须给对象起个名字。</p>
</li>
<li><p>匿名内部类是省略了【实现类&#x2F;子类名称】，但是匿名对象是省略了【对象名称】</p>
</li>
</ol>
<p>强调：匿名内部类和匿名对象不是一回事！！！</p>
<h4 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h4><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><blockquote>
<p>一个对象的内存图</p>
</blockquote>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20200804210233751.png" alt="image-20200804210233751"></p>
<h3 id="三大特征"><a href="#三大特征" class="headerlink" title="三大特征"></a>三大特征</h3><p>封装性、继承性、多态性</p>
<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>Java中只有单继承</p>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20200813182824341.png" alt="image-20200813182824341"></p>
<p><code>public class 子类 extends 父类</code></p>
<blockquote>
<p>继承关系中，父子类构造方法的访间特点</p>
</blockquote>
<ol>
<li><p>子类构造方法当中有一个默认隐含的“super（）“调用，所以一定是先调用的父类构造，后执行的子类构造。</p>
</li>
<li><p>子类构造可以通过super关键字来调用父类重载构造。</p>
</li>
<li><p>super的父类构造调用，必须是子类构造方法的第一个语句。不能一个子类构造调用多次super构造。</p>
</li>
</ol>
<ul>
<li>总结：<br>子类必须调用父类构造方法，不写则赠送super（）；写了则用写的指定的super调用，super只能有一个，还必须是第一个。</li>
</ul>
<p>在父子类的继承关系当中，如果成员变量重名，则创建子类对象时，访间有两种方式：</p>
<ol>
<li>直接通过子类对象访问成员变量：</li>
</ol>
<ul>
<li>等号左边是谁，就优先用谁，没有则向上找</li>
</ul>
<ol start="2">
<li>间接通过成员方法访问成员变量：</li>
</ol>
<ul>
<li>该方法属于谁，就优先用谁，没有则向上找。</li>
</ul>
<blockquote>
<p>子类方法中重名的三种变量的访问</p>
</blockquote>
<ul>
<li>局部变量：直接访问</li>
<li>子类变量：this.name</li>
<li>父类变量：super.name</li>
</ul>
<blockquote>
<p>继承中的覆盖</p>
</blockquote>
<p>方法覆盖重写的注意事项：</p>
<ol>
<li><p>必须保证父子类之间方法的名称相同，参数列表也相同。<br><code>@Override</code>：写在方法前面，用来检测是不是有效的正确覆盖重写。<br>这个注解就算不写，只要满足要求，也是正确的方法覆盖重写。</p>
</li>
<li><p>子类方法的返回值必须【小于等于】父类方法的返回值范围。<br>小扩展提示：<code>java.Lang.object</code>类是所有类的公共最高父类（祖宗类），<code>java.Lang.string</code>就是object的子类。</p>
</li>
<li><p>子类方法的权限必须【大于等于】父类方法的权限修饰符。<br>小扩展提示：<code>public</code>&gt;<code>protected</code>&gt;(default)&gt;<code>private</code>备注：（default）不是关键字<code>default</code>，而是什么都不写，留空。</p>
</li>
</ol>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20200813233711604.png" alt="image-20200813233711604"></p>
<h4 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h4><p>代码中体现多态性：父类引用指向子类对象</p>
<p>格式：</p>
<p>父类名称 对象名 &#x3D; new 子类名称()；</p>
<p>或：</p>
<p>接口名称 对象名 &#x3D; new 实现类名称();</p>
<blockquote>
<p>多态中访问成员变量</p>
</blockquote>
<ul>
<li>直接通过对象名称访问，看等号左边是谁，优先用谁，没有则向上找</li>
<li>间接通过成员方法访问，看该方法属于谁，优先用谁，没有则向上找</li>
</ul>
<blockquote>
<p>多态中访问成员方法</p>
</blockquote>
<p>看new得到是谁，就优先用谁，没有则向上找</p>
<hr>
<p>口诀：（对于定义对象语句）</p>
<ul>
<li>成员变量：编译看左边，运行还看左边</li>
<li>成员方法：编译看左边，运行看右边</li>
</ul>
<blockquote>
<p>为什么用多态？</p>
</blockquote>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20200817201232145.png" alt="image-20200817201232145"></p>
<p>比较统一</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>局部变量和成员变量</p>
<ol>
<li><p><strong>定义的位置不一样</strong><br>局部变量：在方法的内部<br>成员变量：在方法的外部，直接写在类当中</p>
</li>
<li><p><strong>作用范围不一样</strong><br>局部变量：只有方法当中才可以使用，出了方法就不能再用成员变量：整个类全都可以通用。</p>
</li>
<li><p><strong>默认值不一样</strong><br>局部变量：没有默认值，如果要想使用，必须手动进行赋值成员变量：如果没有赋值，会有默认值，规则和数组一样</p>
</li>
<li><p>内存的位置不一样（了解）</p>
<p>局部变量：位于栈内存；成员变量：位于堆内存</p>
</li>
<li><p>生命周期不一样（了解）</p>
<p>局部变量：随着方法进栈而诞生，随着方法出栈而消失</p>
<p>成员变量，随着对象创建而诞生，随着对象呗垃圾回收而消失</p>
</li>
</ol>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>三要素：方法名、参数列表、返回值</p>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><p>public 类名称(参数类型 参数名称) {</p>
<p>​		方法体</p>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line"></span><br><span class="line">	public Student() &#123;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="匿名对象"><a href="#匿名对象" class="headerlink" title="匿名对象"></a>匿名对象</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 类名();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demoe2Anonymous</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main（String[]args）&#123;</span><br><span class="line">        <span class="comment">//普通使用方式</span></span><br><span class="line">        Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>（System.in）；</span><br><span class="line">        <span class="type">int</span> num=sc.nextInt（）；</span><br><span class="line">        <span class="comment">//匿名对象的方式</span></span><br><span class="line">        <span class="type">int</span> num=<span class="keyword">new</span> <span class="title class_">Scanner</span>（System.in）.nextInt（）；</span><br><span class="line">        System.out.printtn（<span class="string">&quot;输入的是：&quot;</span>+num）；</span><br><span class="line">        <span class="comment">//使用一般写法传入参数</span></span><br><span class="line">        Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>（System.in）；</span><br><span class="line">        methodParam（sc）；</span><br><span class="line">        <span class="comment">//使用匿名对象来进行传参</span></span><br><span class="line">        methodParam（<span class="keyword">new</span> <span class="title class_">Scanner</span>（System.in））；</span><br><span class="line"></span><br><span class="line">        Scanner sc=methodReturn（）；</span><br><span class="line">        <span class="type">int</span> num=sc.nextInt（）；</span><br><span class="line">        System.out.println（“输入的是：<span class="string">&quot;+num）；</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    public static void methodParam（Scanner sc）&#123;</span></span><br><span class="line"><span class="string">    	int num=sc.nextInt（）；</span></span><br><span class="line"><span class="string">        System.out.println（“输入的是：“+num）；</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    public static Scanner methodReturn（）&#123;</span></span><br><span class="line"><span class="string">    	//Scanner sc=new Scanner（System.in）；</span></span><br><span class="line"><span class="string">        return new Scanne(System.in);</span></span><br></pre></td></tr></table></figure>

<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="ArrayList集合、泛型"><a href="#ArrayList集合、泛型" class="headerlink" title="ArrayList集合、泛型"></a>ArrayList集合、泛型</h3><p>其长度并没有限制</p>
<p>&lt;&gt;中写的是泛型，泛型只能是引用类型（包装类），不能是基本类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello world&quot;</span>);</span><br><span class="line">        ArrayList&lt;String&gt; list =<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="comment">//添加元素</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">success</span> <span class="operator">=</span> list.add(<span class="string">&quot;赵又廷&quot;</span>);</span><br><span class="line">        System.out.println(success);</span><br><span class="line">        list.add(<span class="string">&quot;迪丽热巴&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        <span class="comment">//删除某元素</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">who</span> <span class="operator">=</span> list.remove(<span class="number">1</span>);</span><br><span class="line">        System.out.printf(<span class="string">&quot;将%s删除&quot;</span>,who);</span><br><span class="line">        System.out.println(<span class="string">&quot;\n&quot;</span>+list);</span><br><span class="line">        <span class="comment">//获取某元素</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> list.get(<span class="number">0</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    	<span class="comment">//获取集合长度</span></span><br><span class="line">    	<span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> list.size();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><h3 id="static"><a href="#static" class="headerlink" title="static"></a><code>static</code></h3><ul>
<li>内容不再属于对象，而属于类</li>
</ul>
<p>静态变量：类名称，静态变量<br>静态方法：类名称.静态方法（）</p>
<p>注意事项：</p>
<ol>
<li><p>静态不能直接访问非静态。<br>原因：因为在内存当中是【先】有的静态内容，【后】有的非静态内容。<br>“先人不知道后人，但是后人知道先人。”</p>
</li>
<li><p>静态方法当中不能用this。<br>原因：this代表当前对象，通过谁调用的方法，谁就是当前对象。</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demoe2StaticMethod</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main（String[]args）&#123;</span><br><span class="line">        MyClass obj=<span class="keyword">new</span> <span class="title class_">MyClass</span>()；<span class="comment">//首先创建对象</span></span><br><span class="line">        <span class="comment">//然后才能使用没有static关键字的内容</span></span><br><span class="line">        obj.method()；</span><br><span class="line">        <span class="comment">//对干静态方法来说，可以通过对象名进行调用，也可以直接通过类名称来调用。</span></span><br><span class="line">        obj.methodstatic()；<span class="comment">//正确，不推荐，这种写法在编译之后也会被javac翻译成为“类名称.静态方法名”</span></span><br><span class="line">        MyClass.methodStatic()；<span class="comment">//正确，推荐</span></span><br><span class="line">        <span class="comment">//对于本来当中的静态方法，可以省略类名称</span></span><br><span class="line">        myNethod()；</span><br><span class="line">        Demoe2StaticMethod.myMethod()；<span class="comment">//完全等效</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">myMethod</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.printin(<span class="string">&quot;自己的方法！&quot;</span>)；</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>static内存图</p>
</blockquote>
<p><img src="C:\Users\Jet\AppData\Roaming\Typora\typora-user-images\image-20200813100228928.png" alt="image-20200813100228928"></p>
<blockquote>
<p>静态代码块</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//静态代码块的内容</span></span><br><span class="line"><span class="keyword">public</span> class 类名称&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<ul>
<li>当第一次用到本类时，静态代码块执行唯一的一次。</li>
<li>静态内容总是优先于非静态，所以静态代码块比构造方法先执行。</li>
</ul>
<h3 id="super"><a href="#super" class="headerlink" title="super"></a><code>super</code></h3><p><code>super</code>关键字的用法有三种：</p>
<ol>
<li><p>在子类的成员方法中，访问父类的成员变量。</p>
</li>
<li><p>在子类的成员方法中，访问父类的成员方法。</p>
</li>
<li><p>在子类的构造方法中，访问父类的构造方法。<code>super()</code></p>
</li>
</ol>
<h3 id="this"><a href="#this" class="headerlink" title="this"></a><code>this</code></h3><p><code>super</code>关键字用来访问父类内容，而<code>this</code>关键字用来访间本类内容。用法也有三种：</p>
<p>1.在本类的成员方法中，访问本类的成员变量。</p>
<p>2.在本类的成员方法中，访问本类的另一个成员方法。</p>
<p>3.在本类的构造方法中，访问本类的另一个构造方法。<code>this()</code></p>
<p>在第三种用法当中要注意：</p>
<ul>
<li><code>this(…)</code>调用也必须是构造方法的第一个语句。</li>
<li>super和this两种构造调用，不能同时使用</li>
</ul>
<h3 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a><code>instanceof</code></h3><p><code>对象 instanceof 类名称</code>：会返回一个boolean值结果，也就是判断前面的对象能不能当作后面类型的实例。</p>
<h3 id="final"><a href="#final" class="headerlink" title="final"></a><code>final</code></h3><p><code>final</code>关键字代表最终、不可改变的</p>
<ol>
<li><p>修饰一个类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> class 类名称&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此类不能有任何子类</p>
</li>
<li><p>修饰一个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>该方法不能被覆盖重写</p>
</li>
<li><p>修饰一个局部变量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">in</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">100</span>;<span class="comment">//仅能有唯一一次赋值</span></span><br></pre></td></tr></table></figure>

<p>该变量不能再进行更改</p>
<p>对基本类型来说，其值不可变</p>
<p>对引用类型来说，其地址不可变 </p>
</li>
<li><p>修饰一个成员变量</p>
<ul>
<li>使用<code>final</code>之后必须手动赋值，不会再给默认值</li>
<li>可以进行直接赋值或通过构造方法赋值</li>
<li>必须保证类当中所有重载的构造方法，都最终会对<code>final</code>的成员变量进行赋值</li>
</ul>
</li>
</ol>
<h2 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h2><h3 id="Math类"><a href="#Math类" class="headerlink" title="Math类"></a>Math类</h3><p><code>java.lang.Math</code>类是数学相关的工具类，里面提供了大量的静态方法，完成与数学运算相关的操作</p>
<p><code>public static double abs(double num)</code>：获取绝对值。有多种重载</p>
<p><code>public static double ceil(double num)</code>：向上取整</p>
<p><code>peblic static double floor(double num)</code>：向下取整</p>
<p><code>public static Long round(double num)</code>：四舍五入</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>接口就是多个类的公共规范。<br>接口是一种引用数据类型，最重要的内容就是其中的：抽象方法</p>
<p>如何定义一个接口的格式：<br>public interface 接口名称（<br>    &#x2F;&#x2F;接口内容<br>}<br><u>备注</u>：换成了关键字interface之后，编译生成的字节码文件仍然是：java–&gt;.class。</p>
<blockquote>
<p>如果是Java7，那么接口中可以包含的内容有：</p>
</blockquote>
<ol>
<li><p>常量</p>
</li>
<li><p>抽象方法</p>
</li>
</ol>
<blockquote>
<p>如果是Java8，还可以额外包含有：</p>
</blockquote>
<ol start="3">
<li><p>默认方法</p>
</li>
<li><p>静态方法</p>
</li>
</ol>
<blockquote>
<p>如果是Java9，还可以额外包含有：</p>
</blockquote>
<ol start="5">
<li>私有方法</li>
</ol>
<h3 id="接口定义"><a href="#接口定义" class="headerlink" title="接口定义"></a>接口定义</h3><p>在任何版本的Java中，接口都能定义抽象方法。<br>格式：</p>
<p>public abstract 返回值类型方法名称（参数列表）；注意事项：</p>
<ol>
<li><p>接口当中的抽象方法，修饰符必须是两个固定的关键字：public abstract</p>
</li>
<li><p>这两个关键字修饰符，可以选择性地省略。（今天刚学，所以不推荐。）</p>
</li>
<li><p>方法的三要素，可以随意定义。</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyInterfaceAbstract</span>&#123;</span><br><span class="line">    <span class="comment">//这是一个抽象方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> methodAbs1（）；</span><br><span class="line">    <span class="comment">//这也是抽象方法</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> methodAbs2（）；</span><br><span class="line">    <span class="comment">//这也是抽象方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> methodAbs3（）；</span><br><span class="line">    <span class="comment">//这也是抽象方法</span></span><br><span class="line">    <span class="keyword">void</span> methodAbs4（）；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="接口实现"><a href="#接口实现" class="headerlink" title="接口实现"></a>接口实现</h3><p>接口使用步骤：</p>
<ol>
<li>接口不能直接使用，必须有一个实现类来实现该接口。</li>
</ol>
<p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class 实现类名称 implements 接口名称&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>接口的实现类必须覆盖重写（实现）接口中所有的抽象方法。<br>实现：去掉abstract关键字，加上方法体大括号。</li>
<li>创建实现类的对象，进行使用。</li>
<li>若不想重写所有方法，则该实现类必须是抽象类</li>
</ol>
<h3 id="接口的默认方法"><a href="#接口的默认方法" class="headerlink" title="接口的默认方法"></a>接口的默认方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">methodDefault</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用默认方法，在接口升级时，可避免没有重写该方法的实现类报错</p>
<h3 id="接口的静态方法"><a href="#接口的静态方法" class="headerlink" title="接口的静态方法"></a>接口的静态方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">methodstatic</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><u>注意事项</u>：不能通过接口实现类的对象来调用接囗当中的静态方法。</p>
<p>正确用法：通过接口名称，直接调用其中的静态方法。</p>
<p>格式：接口名称.静态方法名（参数）；</p>
<h3 id="接口的常量定义"><a href="#接口的常量定义" class="headerlink" title="接口的常量定义"></a>接口的常量定义</h3><p>接囗当中也可以定义“成员变量”，但是必须使用public static final三个关键字进行修饰。</p>
<p>从效果上看，这其实就是接口的【常量】</p>
<p>格式：<br><code>public static final 数据类型常量名称=数据值</code>；</p>
<p>备注：<br>一旦使用final关键字进行修饰，说明不可改变。</p>
<p>注意事项：</p>
<ol>
<li>接口当中的常量，可以省略public static final，注意：不写也照样是这样。</li>
<li>接口当中的常量，必须进行赋值；不能不赋值。</li>
<li>接口中常量使用完全大写的命名，并用下划线进行分割</li>
</ol>
<h3 id="继承父类并实现接口"><a href="#继承父类并实现接口" class="headerlink" title="继承父类并实现接口"></a>继承父类并实现接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Zi</span> <span class="keyword">extends</span> <span class="title class_">Fu</span> <span class="keyword">implements</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用接口的时候，需要注意：</p>
<ol>
<li><p>接口是没有静态代码块或者构造方法的。</p>
</li>
<li><p>一个类的直接父类是唯一的，但是一个类可以同时实现多个接口。</p>
</li>
</ol>
<p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterfaceImpl</span> <span class="keyword">implements</span> <span class="title class_">MyInterfaceA</span>，MyInterfaceB&#123;</span><br><span class="line"><span class="comment">//覆盖重写所有抽象方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li><p>如果实现类所实现的多个接口当中，存在重复的抽象方法，那么只需要覆盖重写一次即可</p>
</li>
<li><p>如果实现类没有覆盖重写所有接口当中的所有抽象方法，那么实现类就必须是一个抽象类</p>
</li>
<li><p>如果实现类所实现的多个接口当中，存在重复的默认方法，那么实现类一定要对冲突的默认方法进行覆盖重写</p>
</li>
<li><p>一个类如果直接父类当中的方法，和接口当中的默认方法产生了冲突，优先用父类当中的方法</p>
</li>
</ol>
<h3 id="对象的转型"><a href="#对象的转型" class="headerlink" title="对象的转型"></a>对象的转型</h3><blockquote>
<p>对象的向上转型</p>
</blockquote>
<p>对象的向上转型，其实就是多态写法：</p>
<p>格式：<code>父类名称对象名=new子类名称()</code>；<code>Animal animal =new Cat()</code>；</p>
<p>含义：右侧创建一个子类对象，把它当做父类来看待使用。创建了一只猫，当做动物看待，没问题。</p>
<p>注意事项：向上转型一定是安全的。从小范围转向了大范围，从小范围的猫，向上转换成为更大范围的动物。</p>
<p>类似于：<code>double num=100</code>;&#x2F;&#x2F;正确，int–&gt;double，自动类型转换。</p>
<blockquote>
<p>对象的向下转型</p>
</blockquote>
<p>2.对象的向下转型，其实是一个【还原】的动作。</p>
<p>格式：子类名称对象名&#x3D;（子类名称）父类对象；</p>
<p>含义：将父类对象，【还原】成为本来的子类对象。</p>
<p><code>Animal animal=new Cat()</code>；&#x2F;&#x2F;本来是猫，向上转型成为动物</p>
<p><code>Cat cat=(Cat)animal</code>；&#x2F;&#x2F;本来是猫，已经被当做动物了，还原回来成为本来的猫</p>
<p>注意事项：<br>a. 必须保证对象本来创建的时候，就是猫，才能向下转型成为猫。</p>
<p>b. 如果对象创建的时候本来不是猫，现在非要向下转型成为猫，就会报错。</p>
<p>类似于：<code>int num=(int)10.0</code>；&#x2F;&#x2F;可以     int num&#x3D;(int)10.5；&#x2F;&#x2F;不可以，精度损失</p>
<h2 id="四种权限修饰符"><a href="#四种权限修饰符" class="headerlink" title="四种权限修饰符"></a>四种权限修饰符</h2><table>
<thead>
<tr>
<th>能否使用</th>
<th>public  &gt;</th>
<th>protected  &gt;</th>
<th>(default  &gt;</th>
<th>private</th>
</tr>
</thead>
<tbody><tr>
<td>同一个类</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>同一个包</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
</tr>
<tr>
<td>不同包子类</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>不同包非子类</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody></table>
<h3 id="更新和删除数据"><a href="#更新和删除数据" class="headerlink" title="更新和删除数据"></a>更新和删除数据</h3><blockquote>
<p>更新UPDATE</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UPDATE IGNORE customers</span><br><span class="line">SET cust_name  = &#x27;The Fudds&#x27;,</span><br><span class="line">	cust_email = &#x27;elmer@fudd.com&#x27;</span><br><span class="line">WHERE cust_id = 10005;</span><br><span class="line">/* IGNORE 关键字表示当发生错误时，整个UPDATE操作被取消*/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>删除</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*DELETE*/</span><br><span class="line">DELETE FROM custmers</span><br><span class="line">WHERE cust_id = 10006;</span><br><span class="line">/*TRUNCATE 清空某张表*/</span><br><span class="line">TRUNCATE TABLE </span><br></pre></td></tr></table></figure>

<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打印异常树</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/IIN%E9%A1%B9%E7%9B%AE%E8%BD%AF%E4%BB%B6%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/IIN%E9%A1%B9%E7%9B%AE%E8%BD%AF%E4%BB%B6%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/" class="post-title-link" itemprop="url">IIN项目软件环境安装指南</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-12-29 11:08:36" itemprop="dateModified" datetime="2020-12-29T11:08:36+08:00">2020-12-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>438</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="IIN项目软件环境安装指南"><a href="#IIN项目软件环境安装指南" class="headerlink" title="IIN项目软件环境安装指南"></a>IIN项目软件环境安装指南</h2><h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><blockquote>
<p>软件配置</p>
</blockquote>
<p>未指定版本下载最新版即可</p>
<table>
<thead>
<tr>
<th>功能</th>
<th>推荐软件</th>
</tr>
</thead>
<tbody><tr>
<td>web调试浏览器</td>
<td>火狐</td>
</tr>
<tr>
<td>前端代码调试</td>
<td>VsCode</td>
</tr>
<tr>
<td>包管理器</td>
<td>Node.js</td>
</tr>
</tbody></table>
<p>以上软件需进入相应官方网站下载并进行安装，安装目录根据具体环境配置，在安装完成并配置相应系统环境变量后，还需进行如下配置。</p>
<p>启动终端使用<code>npm</code>命令分别安装vue2.6.10、vue-router3.0.6，在安装完成之后输入<code>npm start</code>，若能正常启动项目，则前端环境搭建完成，否则根据提示进行其他插件的补充安装。</p>
<h3 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h3><blockquote>
<p>软件配置</p>
</blockquote>
<table>
<thead>
<tr>
<th>功能</th>
<th>推荐软件</th>
</tr>
</thead>
<tbody><tr>
<td>Java工具包</td>
<td>JDK1.8</td>
</tr>
<tr>
<td>代码调试工具</td>
<td>Intellij IDEA</td>
</tr>
<tr>
<td>Java管理工具</td>
<td>Maven</td>
</tr>
</tbody></table>
<p>在数据库配置用户名和密码后，在IDE中进入主程序&#x2F;src&#x2F;main&#x2F;resources&#x2F;文件夹下，打开application.yml文件进行数据库的连接配置。之后正常启动即可。</p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><table>
<thead>
<tr>
<th>功能</th>
<th>推荐软件</th>
</tr>
</thead>
<tbody><tr>
<td>数据存储</td>
<td>MySQL</td>
</tr>
<tr>
<td>数据库管理</td>
<td>Navicat</td>
</tr>
</tbody></table>
<h3 id="算法学习"><a href="#算法学习" class="headerlink" title="算法学习"></a>算法学习</h3><p>建议python3.7.4</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/27/hexo%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mylogo.png">
      <meta itemprop="name" content="Jettison">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jettisons' Blog">
      <meta itemprop="description" content="Jettison">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jettisons' Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/27/hexo%E6%8C%87%E5%8D%97/" class="post-title-link" itemprop="url">Hexo博客搭建指南</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-27 22:10:19" itemprop="dateCreated datePublished" datetime="2022-09-27T22:10:19+08:00">2022-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-04-27 11:58:04" itemprop="dateModified" datetime="2022-04-27T11:58:04+08:00">2022-04-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Hexo博客搭建指南"><a href="#Hexo博客搭建指南" class="headerlink" title="Hexo博客搭建指南"></a>Hexo博客搭建指南</h1><h2 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h2><p>Node.js下载地址：<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">Download | Node.js (nodejs.org)</a></p>
<p>下载后进行安装，安装后检测是否安装完成：</p>
<p><code>node -v</code></p>
<p>node.js会同时安装npm，检测：</p>
<p><code>npm -v</code></p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>使用npm命令安装Hexo：</p>
<p><code>npm install -g hexo-cli</code></p>
<h2 id="初始化博客"><a href="#初始化博客" class="headerlink" title="初始化博客"></a>初始化博客</h2><p><code>hexo init blog</code></p>
<p>也可以直接从已有的github仓库拉取代码</p>
<h2 id="配置博客"><a href="#配置博客" class="headerlink" title="配置博客"></a>配置博客</h2><p>_config.yml文件，为主题配置文件</p>
<p>如下为我的配置</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Jettisons&#x27;</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;Hello,world&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;Jettison&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Jettison</span></span><br><span class="line"><span class="attr">avatar:</span> <span class="string">/0.jpg</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">en</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://yoursite.com</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># Apply to the whole site</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Metadata elements</span></span><br><span class="line"><span class="comment">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span></span><br><span class="line"><span class="attr">meta_generator:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span></span><br><span class="line"><span class="comment">## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;</span></span><br><span class="line"><span class="attr">updated_option:</span> <span class="string">&#x27;mtime&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Include / Exclude file(s)</span></span><br><span class="line"><span class="comment">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span></span><br><span class="line"><span class="attr">include:</span></span><br><span class="line"><span class="attr">exclude:</span></span><br><span class="line"><span class="attr">ignore:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://@github.com/Jettisons/Jettisons.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置文件编写完成后</p>
<p>安装Git部署插件</p>
<p><code>npm install hexo-deployer-git --save</code></p>
<h2 id="网站上线"><a href="#网站上线" class="headerlink" title="网站上线"></a>网站上线</h2><p><code>hexo clean</code></p>
<p><code>hexo g -d</code></p>
<p>完成后便可以输入<a target="_blank" rel="noopener" href="https://jettisons.github.io/%E7%99%BB%E5%BD%95%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2">https://jettisons.github.io/登录自己的博客</a></p>
<h2 id="编写文章"><a href="#编写文章" class="headerlink" title="编写文章"></a>编写文章</h2><p>文章放在source目录下的_post文件夹中，为md格式的文件</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jettison</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Symbols count total: </span>
    <span title="Symbols count total">60k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">54 mins.</span>
  </span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>
-->


<span>
  <span class="post-meta-divider">|</span>
  本站已运行
  <span id="showDays"></span>
</span>
<script>
  var seconds = 1000;
  var minutes = seconds * 60;
  var hours = minutes * 60;
  var days = hours * 24;
  var years = days * 365;
  var birthDay = Date.UTC(2022,01,16,14,00,00); // 这里设置建站时间
  setInterval(function() {
    var today = new Date();
    var todayYear = today.getFullYear();
    var todayMonth = today.getMonth()+1;
    var todayDate = today.getDate();
    var todayHour = today.getHours();
    var todayMinute = today.getMinutes();
    var todaySecond = today.getSeconds();
    var now = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
    var diff = now - birthDay;
    var diffYears = Math.floor(diff/years);
    var diffDays = Math.floor((diff/days)-diffYears*365);
    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      document.getElementById('showDays').innerHTML=""+diffYears+"年"+diffDays+"天"+diffHours+"小时"+diffMinutes+"分钟"+diffSeconds+"秒";
  }, 1000);
</script>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  





<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
